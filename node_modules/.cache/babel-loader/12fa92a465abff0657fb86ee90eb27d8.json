{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, markType, typeCastObjTo$t, getBoxIfEnum } from \"./type\";\nimport { PromiseFactory } from \"./promise\";\nimport { AggregateException } from \"./AggregateException\";\n/**\n * @hidden\n */\n\nvar Task =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(Task, _super);\n\n  function Task(a) {\n    var _rest = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      _rest[_i - 1] = arguments[_i];\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.d = null;\n    _this.b = false;\n    _this.a = null;\n    _this.e = null;\n    a = a == void 0 ? 0 : a;\n\n    switch (a) {\n      case 0:\n        {\n          var c = _rest[0];\n          var d = [c, null];\n          {\n            var f = d[0];\n            var g = d[1];\n\n            var h = function () {};\n\n            var i = function (j) {\n              if (j == null) {\n                _this.b = true;\n              } else {\n                _this.a = new AggregateException(2, \"Exception occurred during task execution\", j);\n              }\n            };\n\n            _this.d = f.done(h).fail(i);\n            _this.e = g;\n          }\n        }\n        break;\n\n      case 1:\n        {\n          var c = _rest[0];\n          var d = _rest[1];\n\n          var e = function () {};\n\n          var f = function (g) {\n            if (g == null) {\n              _this.b = true;\n            } else {\n              _this.a = new AggregateException(2, \"Exception occurred during task execution\", g);\n            }\n          };\n\n          _this.d = c.done(e).fail(f);\n          _this.e = d;\n        }\n        break;\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(Task.prototype, \"c\", {\n    get: function () {\n      return this.h == 5 || this.h == 7 || this.h == 6;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Task.prototype, \"h\", {\n    get: function () {\n      if (this.b) {\n        return 6;\n      }\n\n      switch (this.d.state()) {\n        case \"pending\":\n          return 0;\n\n        case \"resolved\":\n          return 5;\n\n        case \"rejected\":\n          return 7;\n\n        default:\n          return 0;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Task.prototype.f = function (a) {\n    var _this = this;\n\n    var b = function () {\n      return a(_this);\n    };\n\n    var c = function (d) {\n      return a(_this);\n    };\n\n    var d = this.d.done(b).fail(c);\n    return new Task(0, d);\n  };\n\n  Task.prototype.g = function ($tNewResult, a) {\n    var _this = this;\n\n    var b = new TaskCompletionSource$1($tNewResult, 0);\n\n    var c = function () {\n      try {\n        var d_1 = a(_this);\n        b.e(d_1);\n      } catch (e) {\n        b.d(e);\n      }\n    };\n\n    var d = function (e) {\n      return c();\n    };\n\n    var e = function (f) {\n      return c();\n    };\n\n    this.d.done(d).fail(e);\n    return b.b;\n  };\n\n  Task.$t = markType(Task, 'Task');\n  return Task;\n}(Base);\n\nexport { Task };\n/**\n * @hidden\n */\n\nvar Task$1 =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(Task$1, _super);\n\n  function Task$1($tResult, a, b) {\n    var _this = _super.call(this, 1, a, b) || this;\n\n    _this.$tResult = null;\n    _this.i = false;\n    _this.m = null;\n    _this.$tResult = $tResult;\n    _this.$type = _this.$type.specialize(_this.$tResult);\n\n    var c = function (d) {\n      var e = typeCastObjTo$t(_this.$tResult, d);\n      _this.m = e;\n      _this.i = true;\n    };\n\n    var d = function (e) {\n      return _this.i = true;\n    };\n\n    _this.d.done(c).fail(d);\n\n    return _this;\n  }\n\n  Object.defineProperty(Task$1.prototype, \"n\", {\n    get: function () {\n      if (!this.i) {\n        throw 'Result is not ready yet';\n      }\n\n      if (this.a != null) {\n        throw this.a;\n      }\n\n      return this.m;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Task$1.prototype.j = function (a) {\n    return _super.prototype.f.call(this, function (b) {\n      return a(b);\n    });\n  };\n\n  Task$1.prototype.k = function ($tNewResult, a) {\n    var b = function (c) {\n      return getBoxIfEnum($tNewResult, a(c));\n    };\n\n    return this.l(Base.$, b).l($tNewResult, function (c) {\n      return typeCastObjTo$t($tNewResult, c.n);\n    });\n  };\n\n  Task$1.prototype.l = function ($tNewResult, a) {\n    return _super.prototype.g.call(this, $tNewResult, a);\n  };\n\n  Task$1.$t = markType(Task$1, 'Task$1', Task.$);\n  return Task$1;\n}(Task);\n\nexport { Task$1 };\n/**\n * @hidden\n */\n\nvar TaskCompletionSource$1 =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(TaskCompletionSource$1, _super);\n\n  function TaskCompletionSource$1($tResult, a) {\n    var _rest = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      _rest[_i - 2] = arguments[_i];\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.$tResult = null;\n    _this.a = null;\n    _this.b = null;\n    _this.$tResult = $tResult;\n    _this.$type = _this.$type.specialize(_this.$tResult);\n    a = a == void 0 ? 0 : a;\n\n    switch (a) {\n      case 0:\n        {\n          var c = [null];\n          {\n            var e = c[0];\n            _this.a = new PromiseFactory();\n            _this.b = new Task$1(_this.$tResult, _this.a.promise(), e);\n          }\n        }\n        break;\n\n      case 1:\n        {\n          var c = _rest[0];\n          _this.a = new PromiseFactory();\n          _this.b = new Task$1(_this.$tResult, _this.a.promise(), c);\n        }\n        break;\n    }\n\n    return _this;\n  }\n\n  TaskCompletionSource$1.prototype.c = function () {\n    this.a.reject(null);\n  };\n\n  TaskCompletionSource$1.prototype.d = function (a) {\n    this.a.reject(a);\n  };\n\n  TaskCompletionSource$1.prototype.e = function (a) {\n    this.a.resolve(getBoxIfEnum(this.$tResult, a));\n  };\n\n  TaskCompletionSource$1.$t = markType(TaskCompletionSource$1, 'TaskCompletionSource$1');\n  return TaskCompletionSource$1;\n}(Base);\n\nexport { TaskCompletionSource$1 };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/Task_combined.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, markType, typeCastObjTo$t, getBoxIfEnum } from \"./type\";\nimport { PromiseFactory } from \"./promise\";\nimport { AggregateException } from \"./AggregateException\";\n/**\n * @hidden\n */\nvar Task = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Task, _super);\n    function Task(a) {\n        var _rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            _rest[_i - 1] = arguments[_i];\n        }\n        var _this = _super.call(this) || this;\n        _this.d = null;\n        _this.b = false;\n        _this.a = null;\n        _this.e = null;\n        a = (a == void 0) ? 0 : a;\n        switch (a) {\n            case 0:\n                {\n                    var c = _rest[0];\n                    var d = [c, null];\n                    {\n                        var f = d[0];\n                        var g = d[1];\n                        var h = function () {\n                        };\n                        var i = function (j) {\n                            if (j == null) {\n                                _this.b = true;\n                            }\n                            else {\n                                _this.a = new AggregateException(2, \"Exception occurred during task execution\", j);\n                            }\n                        };\n                        _this.d = f.done(h).fail(i);\n                        _this.e = g;\n                    }\n                }\n                break;\n            case 1:\n                {\n                    var c = _rest[0];\n                    var d = _rest[1];\n                    var e = function () {\n                    };\n                    var f = function (g) {\n                        if (g == null) {\n                            _this.b = true;\n                        }\n                        else {\n                            _this.a = new AggregateException(2, \"Exception occurred during task execution\", g);\n                        }\n                    };\n                    _this.d = c.done(e).fail(f);\n                    _this.e = d;\n                }\n                break;\n        }\n        return _this;\n    }\n    Object.defineProperty(Task.prototype, \"c\", {\n        get: function () {\n            return this.h == 5 || this.h == 7 || this.h == 6;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Task.prototype, \"h\", {\n        get: function () {\n            if (this.b) {\n                return 6;\n            }\n            switch (this.d.state()) {\n                case \"pending\": return 0;\n                case \"resolved\": return 5;\n                case \"rejected\": return 7;\n                default: return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Task.prototype.f = function (a) {\n        var _this = this;\n        var b = function () { return a(_this); };\n        var c = function (d) { return a(_this); };\n        var d = this.d.done(b).fail(c);\n        return new Task(0, d);\n    };\n    Task.prototype.g = function ($tNewResult, a) {\n        var _this = this;\n        var b = new TaskCompletionSource$1($tNewResult, 0);\n        var c = function () {\n            try {\n                var d_1 = a(_this);\n                b.e(d_1);\n            }\n            catch (e) {\n                b.d((e));\n            }\n        };\n        var d = function (e) { return c(); };\n        var e = function (f) { return c(); };\n        this.d.done(d).fail(e);\n        return b.b;\n    };\n    Task.$t = markType(Task, 'Task');\n    return Task;\n}(Base));\nexport { Task };\n/**\n * @hidden\n */\nvar Task$1 = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Task$1, _super);\n    function Task$1($tResult, a, b) {\n        var _this = _super.call(this, 1, a, b) || this;\n        _this.$tResult = null;\n        _this.i = false;\n        _this.m = null;\n        _this.$tResult = $tResult;\n        _this.$type = _this.$type.specialize(_this.$tResult);\n        var c = function (d) {\n            var e = typeCastObjTo$t(_this.$tResult, d);\n            _this.m = e;\n            _this.i = true;\n        };\n        var d = function (e) { return _this.i = true; };\n        _this.d.done(c).fail(d);\n        return _this;\n    }\n    Object.defineProperty(Task$1.prototype, \"n\", {\n        get: function () {\n            if (!this.i) {\n                throw 'Result is not ready yet';\n            }\n            if (this.a != null) {\n                throw this.a;\n            }\n            return this.m;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Task$1.prototype.j = function (a) {\n        return _super.prototype.f.call(this, function (b) { return a(b); });\n    };\n    Task$1.prototype.k = function ($tNewResult, a) {\n        var b = function (c) { return getBoxIfEnum($tNewResult, a(c)); };\n        return this.l(Base.$, b).l($tNewResult, function (c) { return typeCastObjTo$t($tNewResult, c.n); });\n    };\n    Task$1.prototype.l = function ($tNewResult, a) {\n        return _super.prototype.g.call(this, $tNewResult, a);\n    };\n    Task$1.$t = markType(Task$1, 'Task$1', Task.$);\n    return Task$1;\n}(Task));\nexport { Task$1 };\n/**\n * @hidden\n */\nvar TaskCompletionSource$1 = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TaskCompletionSource$1, _super);\n    function TaskCompletionSource$1($tResult, a) {\n        var _rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            _rest[_i - 2] = arguments[_i];\n        }\n        var _this = _super.call(this) || this;\n        _this.$tResult = null;\n        _this.a = null;\n        _this.b = null;\n        _this.$tResult = $tResult;\n        _this.$type = _this.$type.specialize(_this.$tResult);\n        a = (a == void 0) ? 0 : a;\n        switch (a) {\n            case 0:\n                {\n                    var c = [null];\n                    {\n                        var e = c[0];\n                        _this.a = new PromiseFactory();\n                        _this.b = new Task$1(_this.$tResult, _this.a.promise(), e);\n                    }\n                }\n                break;\n            case 1:\n                {\n                    var c = _rest[0];\n                    _this.a = new PromiseFactory();\n                    _this.b = new Task$1(_this.$tResult, _this.a.promise(), c);\n                }\n                break;\n        }\n        return _this;\n    }\n    TaskCompletionSource$1.prototype.c = function () {\n        this.a.reject(null);\n    };\n    TaskCompletionSource$1.prototype.d = function (a) {\n        this.a.reject(a);\n    };\n    TaskCompletionSource$1.prototype.e = function (a) {\n        this.a.resolve(getBoxIfEnum(this.$tResult, a));\n    };\n    TaskCompletionSource$1.$t = markType(TaskCompletionSource$1, 'TaskCompletionSource$1');\n    return TaskCompletionSource$1;\n}(Base));\nexport { TaskCompletionSource$1 };\n//# sourceMappingURL=Task_combined.js.map\n"]},"metadata":{},"sourceType":"module"}