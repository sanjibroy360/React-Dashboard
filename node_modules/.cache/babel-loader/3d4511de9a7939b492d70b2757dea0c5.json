{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, runOn, Point_$type, markType } from \"./type\";\nimport { List$1 } from \"./List$1\";\nimport { LabelCollisionPlacementPositions_$type } from \"./LabelCollisionPlacementPositions\";\nimport { QuadTree } from \"./QuadTree\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { LabelCollisionInfo } from \"./LabelCollisionInfo\";\nimport { QuadTreeBoundingBox } from \"./QuadTreeBoundingBox\";\nimport { Random } from \"./Random\";\nimport { HashSet$1 } from \"./HashSet$1\";\nimport { GeometryUtil } from \"./GeometryUtil\";\nimport { truncate, isNaN_ } from \"./number\";\n/**\n * @hidden\n */\n\nvar LabelCollisionManager =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(LabelCollisionManager, _super);\n\n  function LabelCollisionManager(a, b, c, d, e, f, g, h, i, j) {\n    var _this = _super.call(this) || this;\n\n    _this.t = null;\n    _this.labelsMoved = null;\n    _this.h = null;\n    _this.f = null;\n    _this.e = 0;\n    _this.c = null;\n    _this.y = 0;\n    _this.af = 0;\n    _this.ae = 0;\n    _this.a0 = null;\n    _this.z = 0;\n    _this.x = 0;\n    _this.r = new LinkedList$1(LabelCollisionInfo.$);\n    _this.ab = 0;\n    _this.s = new List$1(LabelCollisionInfo.$, 0);\n    _this.k = false;\n    _this.j = false;\n    _this.ad = 0;\n    _this.aa = 0;\n    _this.u = 0;\n    _this.v = 0;\n    _this.ac = 0;\n    _this.l = false;\n    _this.i = false;\n    _this.ak = null;\n    _this.ai = null;\n    _this.a0 = c;\n    _this.z = a;\n    _this.x = b;\n    _this.f = new QuadTree(a, b, 8, 8);\n    _this.e = f;\n    _this.c = d;\n    _this.t = new List$1(LabelCollisionPlacementPositions_$type, 0);\n\n    _this.t.add(0);\n\n    _this.t.add(5);\n\n    _this.t.add(7);\n\n    _this.t.add(2);\n\n    _this.t.add(3);\n\n    _this.t.add(6);\n\n    _this.t.add(1);\n\n    _this.t.add(4);\n\n    _this.t.remove(g);\n\n    _this.t.insert(0, g);\n\n    _this.y = e;\n    _this.af = h;\n    _this.ae = i;\n    _this.i = j;\n    return _this;\n  }\n\n  LabelCollisionManager.prototype.g = function (a, b, c, d, e) {\n    var f = 0;\n    var g = 0;\n\n    switch (b) {\n      case 0:\n        f = a.o;\n        g = a.p - a.m - a.k - this.y - d;\n        break;\n\n      case 4:\n        f = a.o - a.n - a.l - this.y - c;\n        g = a.p - a.m - a.k - this.y - d;\n        break;\n\n      case 5:\n        f = a.o + a.n + a.l + this.y + c;\n        g = a.p - a.m - a.k - this.y - d;\n        break;\n\n      case 1:\n        f = a.o - a.n - a.l - this.y - c;\n        g = a.p;\n        break;\n\n      case 2:\n        f = a.o + a.n + a.l + this.y + c;\n        g = a.p;\n        break;\n\n      case 3:\n        f = a.o;\n        g = a.p + a.m + a.k + this.y + d;\n        break;\n\n      case 6:\n        f = a.o - a.n - a.l - this.y - c;\n        g = a.p + a.m + a.k + this.y + d;\n        break;\n\n      case 7:\n        f = a.o + a.n + a.l + this.y + c;\n        g = a.p + a.m + a.k + this.y - d;\n        break;\n    }\n\n    var h = new QuadTreeBoundingBox();\n    h.b = f;\n    h.c = g;\n    h.e = a.l;\n    h.d = a.k;\n    h.g = a;\n\n    if (this.o(h) && !e) {\n      return null;\n    }\n\n    return h;\n  };\n\n  LabelCollisionManager.prototype.o = function (a) {\n    var b = a.b - a.e;\n    var c = a.b + a.e;\n    var d = a.c - a.d;\n    var e = a.c + a.d;\n    var f = this.a0;\n\n    if (b < f.left || c > f.right || d < f.top || e > f.bottom) {\n      return true;\n    }\n\n    return false;\n  };\n\n  LabelCollisionManager.prototype.as = function (a, b, c, d, e) {\n    this.ar(a, b, c, d, e);\n  };\n\n  LabelCollisionManager.prototype.ar = function (a, b, c, d, e) {\n    this.f.d(a);\n    a.b = b;\n    a.c = c;\n    a.e = d;\n    a.d = e;\n    this.f.c(a);\n  };\n\n  LabelCollisionManager.prototype.aw = function (a) {\n    this.f.d(a);\n  };\n\n  LabelCollisionManager.prototype.al = function (a) {\n    this.ab++;\n    this.r.f(a);\n    a.e = this.r.d;\n\n    if (a.c == null) {\n      a.c = new QuadTreeBoundingBox();\n      a.c.b = a.o;\n      a.c.c = a.p;\n      a.c.e = a.n;\n      a.c.d = a.m;\n      a.c.g = a;\n      this.f.c(a.c);\n    }\n  };\n\n  LabelCollisionManager.prototype.ax = function (a) {\n    if (a.c != null) {\n      this.f.d(a.c);\n      a.c = null;\n    }\n\n    if (a.b != null) {\n      this.f.d(a.b);\n      a.b = null;\n    }\n\n    if (a.e != null) {\n      this.r.h(a.e);\n      a.e = null;\n    }\n\n    this.ab--;\n  };\n\n  LabelCollisionManager.prototype.au = function (a) {\n    if (a.c != null && a.c.b == a.o && a.c.c == a.p) {\n      return;\n    }\n\n    if (a.c != null) {\n      this.f.d(a.c);\n    }\n\n    var b = NaN;\n    var c = NaN;\n\n    if (a.c == null) {\n      a.c = new QuadTreeBoundingBox();\n      a.c.g = a;\n    } else {\n      if (a.b != null) {\n        b = a.b.b - a.c.b;\n        c = a.b.c - a.c.c;\n      }\n    }\n\n    a.c.b = a.o;\n    a.c.c = a.p;\n    a.c.e = a.n;\n    a.c.d = a.m;\n    this.f.c(a.c);\n\n    if (a.b != null) {\n      this.f.d(a.b);\n\n      if (!isNaN_(b)) {\n        a.b = new QuadTreeBoundingBox();\n        a.b.b = a.c.b + b;\n        a.b.c = a.c.c + c;\n        a.b.g = a;\n        a.b.e = a.l;\n        a.b.d = a.k;\n        a.g = a.b.b;\n        a.h = a.b.c;\n        this.f.c(a.b);\n      } else {\n        a.b = this.g(a, a.a, 0, 0, true);\n        a.g = a.b.b;\n        a.h = a.b.c;\n        this.f.c(a.b);\n      }\n    }\n  };\n\n  LabelCollisionManager.prototype.at = function (a) {\n    this.f.d(a.b);\n    a.b.b = a.g;\n    a.b.c = a.h;\n    a.b.e = a.l;\n    a.b.d = a.k;\n    this.f.c(a.b);\n  };\n\n  LabelCollisionManager.prototype.az = function () {\n    this.j = false;\n    {\n      var a = this.r.c;\n\n      while (a != null) {\n        if (a.c.b != null) {\n          this.f.d(a.c.b);\n          a.c.b = null;\n\n          if (a.c.f != null) {\n            a.c.f.clear();\n          }\n        }\n\n        a = a.a;\n      }\n\n      this.ac = 0;\n    }\n    this.aa = 0;\n    this.u = 0.4;\n    this.v = 0.4;\n    var b = truncate(Math.ceil(this.ae / 150 * this.af));\n    this.ad = b;\n    this.ao();\n  };\n\n  LabelCollisionManager.prototype.an = function () {\n    this.s.clear();\n  };\n\n  LabelCollisionManager.prototype.am = function () {\n    this.j = true;\n  };\n\n  LabelCollisionManager.prototype.aq = function () {\n    this.k = false;\n\n    if (this.j) {\n      return;\n    }\n\n    this.ao();\n  };\n\n  LabelCollisionManager.prototype.ao = function () {\n    this.s.clear();\n    this.av(false);\n\n    if (this.e == 0) {\n      for (var a = 0; a < this.af; a++) {\n        this.v = this.u * (this.ad - this.aa) / this.ad;\n        this.ap();\n        this.aa++;\n\n        if (this.aa > this.ad) {\n          if (this.h != null) {\n            this.h();\n          }\n\n          return;\n        }\n      }\n\n      if (this.labelsMoved != null) {\n        this.labelsMoved(this.s);\n      }\n\n      if (this.ac > 0) {\n        if (!this.k) {\n          this.k = true;\n          this.c.executeDelayed(runOn(this, this.aq), 150);\n        }\n      } else {\n        if (this.h != null) {\n          this.h();\n        }\n      }\n    } else {\n      if (this.e == 2) {\n        var b = this.r.c;\n        this.f.k();\n\n        while (b != null) {\n          var c = b.c;\n\n          if (c.b != null) {\n            this.f.d(c.b);\n            c.b = null;\n            c.d = false;\n            c.f = null;\n          }\n\n          b = b.a;\n        }\n\n        this.ac = 0;\n        this.av(true);\n      }\n\n      if (this.labelsMoved != null) {\n        this.labelsMoved(this.s);\n      }\n    }\n  };\n\n  LabelCollisionManager.prototype.ap = function () {\n    var a = truncate(Math.round((this.ab - 1) * LabelCollisionManager.aj.nextDouble()));\n    var b = 0;\n    var c = this.r.c;\n    var d = this.w(null);\n    var e = 30;\n    var f = 60;\n\n    while (c != null) {\n      var g = c.c;\n      var h = 0;\n      var i = 0;\n\n      if (this.i) {\n        h = LabelCollisionManager.aj.nextDouble() * g.l * 2;\n        i = LabelCollisionManager.aj.nextDouble() * g.k * 2;\n      }\n\n      if (b == a) {\n        var j = truncate(Math.round((this.t.count - 1) * LabelCollisionManager.aj.nextDouble()));\n\n        while (this.t._inner[j] == g.a) {\n          j = truncate(Math.round((this.t.count - 1) * LabelCollisionManager.aj.nextDouble()));\n        }\n\n        var k = g.b;\n        var l = this.g(g, this.t._inner[j], h, i, false);\n        var m = 0;\n\n        while (l == null) {\n          if (m >= e) {\n            h = 0;\n            i = 0;\n          }\n\n          if (m >= f) {\n            break;\n          }\n\n          j = truncate(Math.round((this.t.count - 1) * LabelCollisionManager.aj.nextDouble()));\n          l = this.g(g, this.t._inner[j], h, i, false);\n          m++;\n        }\n\n        g.b = l;\n\n        if (k != null) {\n          this.f.d(k);\n        }\n\n        if (l != null) {\n          this.f.c(l);\n          var n = this.w(g);\n          var o = d > n;\n\n          if (!o) {\n            var p = Math.exp(-(n - d) / this.v);\n\n            if (LabelCollisionManager.aj.nextDouble() < p) {\n              o = true;\n            }\n          }\n\n          if (!o && k != null) {\n            this.f.d(l);\n            this.f.c(k);\n            g.b = k;\n\n            if (!this.l) {\n              this.w(g);\n            }\n          } else {\n            g.a = this.t._inner[j];\n            g.g = g.b.b;\n            g.h = g.b.c;\n            this.s.add(g);\n          }\n        } else {\n          if (!this.l) {\n            this.w(g);\n          }\n\n          g.d = false;\n          this.s.add(g);\n        }\n\n        break;\n      }\n\n      b++;\n      c = c.a;\n    }\n  };\n\n  LabelCollisionManager.prototype.w = function (a) {\n    if (this.l) {\n      var b = 0;\n      var c = this.r.c;\n\n      while (c != null) {\n        var d = c.c;\n        var e = d.d;\n        d.d = false;\n\n        if (d.b != null) {\n          var f = this.f.e(d.b);\n\n          for (var g = 0; g < f.count; g++) {\n            var h = f._inner[g].l.c;\n\n            while (h != null) {\n              var i = h.c;\n\n              if (i.g == d) {\n                h = h.a;\n                continue;\n              }\n\n              if (d.b.a(i)) {\n                d.d = true;\n                b += d.b.f(i);\n              }\n\n              h = h.a;\n            }\n          }\n\n          if (d.d != e) {\n            this.s.add(d);\n          }\n        }\n\n        c = c.a;\n      }\n\n      return b;\n    } else {\n      if (a != null) {\n        var j = new HashSet$1(LabelCollisionInfo.$, 0);\n        var k = new HashSet$1(LabelCollisionInfo.$, 0);\n        var l = new HashSet$1(LabelCollisionInfo.$, 0);\n        var m = new List$1(LabelCollisionInfo.$, 0);\n\n        if (a.f != null) {\n          for (var n = 0; n < a.f.count; n++) {\n            j.add_1(a.f._inner[n]);\n            k.add_1(a.f._inner[n]);\n          }\n        }\n\n        var o = a.d;\n        a.d = false;\n\n        if (a.b != null) {\n          var p = this.f.e(a.b);\n\n          for (var q = 0; q < p.count; q++) {\n            var r = p._inner[q].l.c;\n\n            while (r != null) {\n              var s = r.c;\n\n              if (s.g == a) {\n                r = r.a;\n                continue;\n              }\n\n              if (a.b.a(s) && !l.contains(s.g)) {\n                a.d = true;\n                l.add_1(s.g);\n                m.add(s.g);\n              }\n\n              r = r.a;\n            }\n          }\n\n          p = this.f.e(a.c);\n\n          for (var t = 0; t < p.count; t++) {\n            var u = p._inner[t].l.c;\n\n            while (u != null) {\n              var v = u.c;\n\n              if (v.g == a) {\n                u = u.a;\n                continue;\n              }\n\n              if (this.m(a.c, v)) {\n                u = u.a;\n                continue;\n              }\n\n              if (a.c.a(v) && !l.contains(v.g)) {\n                a.d = true;\n                l.add_1(v.g);\n                m.add(v.g);\n              }\n\n              u = u.a;\n            }\n          }\n\n          if (a.d != o) {\n            this.s.add(a);\n          }\n\n          if (a.f != null) {\n            for (var w = a.f.count - 1; w >= 0; w--) {\n              if (!l.contains(a.f._inner[w])) {\n                var x = a.f._inner[w];\n                var y = x.f.remove(a);\n                a.f.removeAt(w);\n\n                if (x.f.count == 0 && y) {\n                  this.ac--;\n                }\n\n                var z = j.remove(x);\n\n                if (j.count == 0 && z) {\n                  this.ac--;\n                }\n              }\n            }\n          }\n\n          for (var aa = 0; aa < m.count; aa++) {\n            var ab = m._inner[aa];\n\n            if (!j.contains(ab)) {\n              if (a.f == null) {\n                a.f = new List$1(LabelCollisionInfo.$, 0);\n              }\n\n              a.f.add(ab);\n\n              if (j.count == 0) {\n                this.ac++;\n              }\n\n              j.add_1(ab);\n\n              if (ab.f == null) {\n                ab.f = new List$1(LabelCollisionInfo.$, 0);\n              }\n\n              if (ab.f.count == 0) {\n                this.ac++;\n              }\n\n              ab.f.add(a);\n            }\n          }\n        }\n      }\n\n      return this.ac;\n    }\n  };\n\n  LabelCollisionManager.prototype.m = function (a, b) {\n    if (a.g.c == a && b.g.c == b) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Object.defineProperty(LabelCollisionManager.prototype, \"ag\", {\n    get: function () {\n      return this.ac;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LabelCollisionManager.prototype.ay = function (a, b, c) {\n    this.a0 = c;\n    var d = new QuadTree(a, b, this.f.i, this.f.f);\n    var e = this.r.c;\n\n    while (e != null) {\n      d.c(e.c.c);\n\n      if (e.c.b != null) {\n        d.c(e.c.b);\n      }\n\n      e = e.a;\n    }\n\n    this.f = d;\n    this.z = a;\n    this.x = b;\n  };\n\n  LabelCollisionManager.prototype.q = function () {\n    var a = this.r.c;\n\n    while (a != null) {\n      a.c.d = false;\n\n      if (a.c.b != null) {\n        if (this.o(a.c.b)) {\n          return true;\n        }\n      }\n\n      a = a.a;\n    }\n\n    return false;\n  };\n\n  LabelCollisionManager.prototype.ah = function () {\n    var a = this.r.c;\n\n    while (a != null) {\n      a.c.d = false;\n      a = a.a;\n    }\n\n    a = this.r.c;\n\n    while (a != null) {\n      var b = a.c.b;\n      var c = a.c.c;\n      var d = this.f.e(c);\n\n      for (var e = 0; e < d.count; e++) {\n        var f = d._inner[e].l.c;\n\n        while (f != null) {\n          var g = f.c;\n\n          if (this.m(c, g)) {\n            f = f.a;\n            continue;\n          }\n\n          if (c.a(g)) {\n            var h = f.c.g;\n\n            if (h != a.c) {\n              h.d = true;\n              a.c.d = true;\n            }\n          }\n\n          f = f.a;\n        }\n      }\n\n      if (b == null) {\n        return -1;\n      }\n\n      d = this.f.e(b);\n\n      for (var i = 0; i < d.count; i++) {\n        var j = d._inner[i].l.c;\n\n        while (j != null) {\n          var k = j.c;\n\n          if (b.a(k)) {\n            var l = j.c.g;\n\n            if (l != a.c) {\n              l.d = true;\n              a.c.d = true;\n            }\n          }\n\n          j = j.a;\n        }\n      }\n\n      a = a.a;\n    }\n\n    var m = 0;\n    a = this.r.c;\n\n    while (a != null) {\n      if (a.c.d) {\n        m++;\n      }\n\n      a = a.a;\n    }\n\n    return m;\n  };\n\n  LabelCollisionManager.prototype.av = function (a) {\n    var b = this.r.c;\n\n    while (b != null) {\n      var c = b.c;\n\n      if (c.b == null || a) {\n        var d = false;\n\n        if (a) {\n          var e = this.f.a(c.o, c.p, 1.5);\n          var f = this.a(e);\n\n          for (var g = 0; g < f.length; g++) {\n            var h = f[g];\n            var i = this.g(c, h, 0, 0, false);\n\n            if (i == null) {\n              continue;\n            }\n\n            var j = this.f.e(i);\n            d = true;\n\n            for (var k = 0; k < j.count; k++) {\n              var l = j._inner[k].l.c;\n\n              while (l != null) {\n                var m = l.c;\n\n                if (i.a(m)) {\n                  d = false;\n                  break;\n                }\n\n                l = l.a;\n              }\n            }\n\n            if (d) {\n              c.b = i;\n              c.a = h;\n              c.g = c.b.b;\n              c.h = c.b.c;\n              this.f.c(c.b);\n              this.s.add(c);\n              break;\n            }\n          }\n        }\n\n        if (!d) {\n          d = this.p(c);\n        }\n      }\n\n      b = b.a;\n    }\n  };\n\n  LabelCollisionManager.prototype.p = function (a) {\n    var b = false;\n\n    if (!b) {\n      for (var c = 0; c < this.t.count; c++) {\n        var d = this.g(a, this.t._inner[c], 0, 0, false);\n\n        if (d == null) {\n          continue;\n        }\n\n        b = !this.n(d, a);\n        var e = a.c;\n\n        if (e == null) {\n          e = new QuadTreeBoundingBox();\n          e.g = a;\n          e.b = a.o;\n          e.c = a.p;\n          e.e = a.n;\n          e.d = a.m;\n          this.f.c(e);\n          a.c = e;\n        }\n\n        var f = this.n(e, a);\n        b = b && !f;\n\n        if (b) {\n          a.b = d;\n          a.a = this.t._inner[c];\n          a.g = a.b.b;\n          a.h = a.b.c;\n          this.f.c(a.b);\n          this.s.add(a);\n          break;\n        }\n      }\n    }\n\n    if (!b) {\n      var g = Number.POSITIVE_INFINITY;\n      var h = 0;\n      var i = null;\n\n      for (var j = 0; j < this.t.count; j++) {\n        var k = 0;\n        var l = null;\n        var m = new HashSet$1(LabelCollisionInfo.$, 0);\n\n        if (!this.l) {\n          l = new List$1(LabelCollisionInfo.$, 0);\n        }\n\n        var n = this.g(a, this.t._inner[j], 0, 0, false);\n\n        if (n == null) {\n          continue;\n        }\n\n        var o = this.f.e(n);\n\n        for (var p = 0; p < o.count; p++) {\n          var q = o._inner[p].l.c;\n\n          while (q != null) {\n            var r = q.c;\n\n            if (n.a(r)) {\n              k += n.f(r);\n\n              if (!this.l) {\n                if (!m.contains(r.g)) {\n                  l.add(r.g);\n                  m.add_1(r.g);\n                }\n              }\n            }\n\n            q = q.a;\n          }\n        }\n\n        var s = a.c;\n\n        if (s == null) {\n          s = new QuadTreeBoundingBox();\n          s.g = a;\n          s.b = a.o;\n          s.c = a.p;\n          s.e = a.n;\n          s.d = a.m;\n        }\n\n        o = this.f.e(s);\n\n        for (var t = 0; t < o.count; t++) {\n          var u = o._inner[t].l.c;\n\n          while (u != null) {\n            var v = u.c;\n\n            if (u.c.g == a) {\n              u = u.a;\n              continue;\n            }\n\n            if (this.m(s, v)) {\n              u = u.a;\n              continue;\n            }\n\n            if (s.a(v)) {\n              if (!this.l) {\n                if (!m.contains(v.g)) {\n                  l.add(v.g);\n                  m.add_1(v.g);\n                }\n              }\n            }\n\n            u = u.a;\n          }\n        }\n\n        if (k < g) {\n          var w = this.g(a, this.t._inner[j], 0, 0, false);\n\n          if (w != null) {\n            g = k;\n            h = j;\n\n            if (!this.l) {\n              i = l;\n            }\n          }\n        }\n      }\n\n      var x = this.g(a, this.t._inner[h], 0, 0, false);\n      a.d = true;\n\n      if (!this.l) {\n        if (a.f != null && a.f.count > 0) {\n          this.ac--;\n\n          for (var y = a.f.count - 1; y >= 0; y--) {\n            var z = a.f._inner[y];\n\n            if (z.f != null) {\n              z.f.remove(a);\n\n              if (z.f.count == 0) {\n                this.ac--;\n              }\n            }\n          }\n        }\n\n        if (i == null) {\n          a.d = false;\n          this.s.add(a);\n          return false;\n        }\n\n        a.f = i;\n\n        if (i.count > 0) {\n          this.ac++;\n        }\n\n        for (var aa = 0; aa < i.count; aa++) {\n          var ab = i._inner[aa];\n\n          if (ab.f == null) {\n            ab.f = new List$1(LabelCollisionInfo.$, 0);\n          }\n\n          if (!ab.f.contains(a)) {\n            if (ab.f.count == 0) {\n              this.ac++;\n            }\n\n            ab.f.add(a);\n          }\n        }\n      }\n\n      a.b = x;\n      a.a = this.t._inner[h];\n      a.g = a.b.b;\n      a.h = a.b.c;\n      this.f.c(a.b);\n      this.s.add(a);\n    }\n\n    return b;\n  };\n\n  LabelCollisionManager.prototype.n = function (a, b) {\n    var c = false;\n    var d = this.f.e(a);\n\n    for (var e = 0; e < d.count; e++) {\n      var f = d._inner[e].l.c;\n\n      while (f != null) {\n        if (f.c.g == b) {\n          f = f.a;\n          continue;\n        }\n\n        var g = f.c;\n\n        if (this.m(a, g)) {\n          f = f.a;\n          continue;\n        }\n\n        if (a.a(g)) {\n          c = true;\n          break;\n        }\n\n        f = f.a;\n      }\n    }\n\n    return c;\n  };\n\n  LabelCollisionManager.prototype.a = function (a) {\n    var b = new Array(3);\n    var c = GeometryUtil.e({\n      $type: Point_$type,\n      x: 0,\n      y: 0\n    }, {\n      $type: Point_$type,\n      x: a.a,\n      y: a.b\n    });\n    c = c * 180 / Math.PI;\n    c = GeometryUtil.g(c);\n\n    if (c >= 0 && c <= 22.5 || c >= 337.5 && c <= 360) {\n      b[0] = 2;\n      b[1] = 5;\n      b[2] = 7;\n    }\n\n    if (c >= 22.5 && c <= 67.5) {\n      b[0] = 2;\n      b[1] = 7;\n      b[2] = 3;\n    }\n\n    if (c >= 67.5 && c <= 112.5) {\n      b[0] = 7;\n      b[1] = 3;\n      b[2] = 6;\n    }\n\n    if (c >= 112.5 && c <= 157.5) {\n      b[0] = 3;\n      b[1] = 6;\n      b[2] = 1;\n    }\n\n    if (c >= 157.5 && c <= 202.5) {\n      b[0] = 6;\n      b[1] = 1;\n      b[2] = 4;\n    }\n\n    if (c >= 202.5 && c <= 247.5) {\n      b[0] = 1;\n      b[1] = 4;\n      b[2] = 0;\n    }\n\n    if (c >= 247.5 && c <= 292.5) {\n      b[0] = 4;\n      b[1] = 0;\n      b[2] = 5;\n    }\n\n    if (c >= 292.5 && c <= 337.5) {\n      b[0] = 0;\n      b[1] = 5;\n      b[2] = 2;\n    }\n\n    return b;\n  };\n\n  LabelCollisionManager.prototype.d = function (a, b) {\n    var c = false;\n    var d = null;\n    var e = new QuadTreeBoundingBox();\n    e.b = a.x;\n    e.c = a.y;\n    e.e = 5;\n    e.d = 5;\n    var f = this.f.e(e);\n\n    for (var g = 0; g < f.count; g++) {\n      var h = f._inner[g].l.c;\n\n      while (h != null) {\n        var i = h.c;\n\n        if (i.g.c == i) {\n          h = h.a;\n          continue;\n        }\n\n        if (e.a(i)) {\n          d = i;\n          c = true;\n          break;\n        }\n\n        h = h.a;\n      }\n    }\n\n    if (c) {\n      return d.g;\n    } else {\n      return null;\n    }\n  };\n\n  LabelCollisionManager.$t = markType(LabelCollisionManager, 'LabelCollisionManager');\n  LabelCollisionManager.aj = new Random(0);\n  return LabelCollisionManager;\n}(Base);\n\nexport { LabelCollisionManager };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/LabelCollisionManager.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, runOn, Point_$type, markType } from \"./type\";\nimport { List$1 } from \"./List$1\";\nimport { LabelCollisionPlacementPositions_$type } from \"./LabelCollisionPlacementPositions\";\nimport { QuadTree } from \"./QuadTree\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { LabelCollisionInfo } from \"./LabelCollisionInfo\";\nimport { QuadTreeBoundingBox } from \"./QuadTreeBoundingBox\";\nimport { Random } from \"./Random\";\nimport { HashSet$1 } from \"./HashSet$1\";\nimport { GeometryUtil } from \"./GeometryUtil\";\nimport { truncate, isNaN_ } from \"./number\";\n/**\n * @hidden\n */\nvar LabelCollisionManager = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(LabelCollisionManager, _super);\n    function LabelCollisionManager(a, b, c, d, e, f, g, h, i, j) {\n        var _this = _super.call(this) || this;\n        _this.t = null;\n        _this.labelsMoved = null;\n        _this.h = null;\n        _this.f = null;\n        _this.e = 0;\n        _this.c = null;\n        _this.y = 0;\n        _this.af = 0;\n        _this.ae = 0;\n        _this.a0 = null;\n        _this.z = 0;\n        _this.x = 0;\n        _this.r = new LinkedList$1(LabelCollisionInfo.$);\n        _this.ab = 0;\n        _this.s = new List$1(LabelCollisionInfo.$, 0);\n        _this.k = false;\n        _this.j = false;\n        _this.ad = 0;\n        _this.aa = 0;\n        _this.u = 0;\n        _this.v = 0;\n        _this.ac = 0;\n        _this.l = false;\n        _this.i = false;\n        _this.ak = null;\n        _this.ai = null;\n        _this.a0 = c;\n        _this.z = a;\n        _this.x = b;\n        _this.f = new QuadTree(a, b, 8, 8);\n        _this.e = f;\n        _this.c = d;\n        _this.t = new List$1(LabelCollisionPlacementPositions_$type, 0);\n        _this.t.add(0);\n        _this.t.add(5);\n        _this.t.add(7);\n        _this.t.add(2);\n        _this.t.add(3);\n        _this.t.add(6);\n        _this.t.add(1);\n        _this.t.add(4);\n        _this.t.remove(g);\n        _this.t.insert(0, g);\n        _this.y = e;\n        _this.af = h;\n        _this.ae = i;\n        _this.i = j;\n        return _this;\n    }\n    LabelCollisionManager.prototype.g = function (a, b, c, d, e) {\n        var f = 0;\n        var g = 0;\n        switch (b) {\n            case 0:\n                f = a.o;\n                g = (((a.p - a.m) - a.k) - this.y - d);\n                break;\n            case 4:\n                f = (((a.o - a.n) - a.l) - this.y) - c;\n                g = (((a.p - a.m) - a.k) - this.y) - d;\n                break;\n            case 5:\n                f = (((a.o + a.n) + a.l) + this.y) + c;\n                g = (((a.p - a.m) - a.k) - this.y) - d;\n                break;\n            case 1:\n                f = (((a.o - a.n) - a.l) - this.y) - c;\n                g = a.p;\n                break;\n            case 2:\n                f = (((a.o + a.n) + a.l) + this.y) + c;\n                g = a.p;\n                break;\n            case 3:\n                f = a.o;\n                g = (((a.p + a.m) + a.k) + this.y) + d;\n                break;\n            case 6:\n                f = (((a.o - a.n) - a.l) - this.y) - c;\n                g = (((a.p + a.m) + a.k) + this.y) + d;\n                break;\n            case 7:\n                f = (((a.o + a.n) + a.l) + this.y) + c;\n                g = (((a.p + a.m) + a.k) + this.y) - d;\n                break;\n        }\n        var h = new QuadTreeBoundingBox();\n        h.b = f;\n        h.c = g;\n        h.e = a.l;\n        h.d = a.k;\n        h.g = a;\n        if (this.o(h) && !e) {\n            return null;\n        }\n        return h;\n    };\n    LabelCollisionManager.prototype.o = function (a) {\n        var b = a.b - a.e;\n        var c = a.b + a.e;\n        var d = a.c - a.d;\n        var e = a.c + a.d;\n        var f = this.a0;\n        if (b < f.left || c > f.right || d < f.top || e > f.bottom) {\n            return true;\n        }\n        return false;\n    };\n    LabelCollisionManager.prototype.as = function (a, b, c, d, e) {\n        this.ar(a, b, c, d, e);\n    };\n    LabelCollisionManager.prototype.ar = function (a, b, c, d, e) {\n        this.f.d(a);\n        a.b = b;\n        a.c = c;\n        a.e = d;\n        a.d = e;\n        this.f.c(a);\n    };\n    LabelCollisionManager.prototype.aw = function (a) {\n        this.f.d(a);\n    };\n    LabelCollisionManager.prototype.al = function (a) {\n        this.ab++;\n        this.r.f(a);\n        a.e = this.r.d;\n        if (a.c == null) {\n            a.c = new QuadTreeBoundingBox();\n            a.c.b = a.o;\n            a.c.c = a.p;\n            a.c.e = a.n;\n            a.c.d = a.m;\n            a.c.g = a;\n            this.f.c(a.c);\n        }\n    };\n    LabelCollisionManager.prototype.ax = function (a) {\n        if (a.c != null) {\n            this.f.d(a.c);\n            a.c = null;\n        }\n        if (a.b != null) {\n            this.f.d(a.b);\n            a.b = null;\n        }\n        if (a.e != null) {\n            this.r.h(a.e);\n            a.e = null;\n        }\n        this.ab--;\n    };\n    LabelCollisionManager.prototype.au = function (a) {\n        if (a.c != null && a.c.b == a.o && a.c.c == a.p) {\n            return;\n        }\n        if (a.c != null) {\n            this.f.d(a.c);\n        }\n        var b = NaN;\n        var c = NaN;\n        if (a.c == null) {\n            a.c = new QuadTreeBoundingBox();\n            a.c.g = a;\n        }\n        else {\n            if (a.b != null) {\n                b = a.b.b - a.c.b;\n                c = a.b.c - a.c.c;\n            }\n        }\n        a.c.b = a.o;\n        a.c.c = a.p;\n        a.c.e = a.n;\n        a.c.d = a.m;\n        this.f.c(a.c);\n        if (a.b != null) {\n            this.f.d(a.b);\n            if (!isNaN_(b)) {\n                a.b = new QuadTreeBoundingBox();\n                a.b.b = a.c.b + b;\n                a.b.c = a.c.c + c;\n                a.b.g = a;\n                a.b.e = a.l;\n                a.b.d = a.k;\n                a.g = a.b.b;\n                a.h = a.b.c;\n                this.f.c(a.b);\n            }\n            else {\n                a.b = this.g(a, a.a, 0, 0, true);\n                a.g = a.b.b;\n                a.h = a.b.c;\n                this.f.c(a.b);\n            }\n        }\n    };\n    LabelCollisionManager.prototype.at = function (a) {\n        this.f.d(a.b);\n        a.b.b = a.g;\n        a.b.c = a.h;\n        a.b.e = a.l;\n        a.b.d = a.k;\n        this.f.c(a.b);\n    };\n    LabelCollisionManager.prototype.az = function () {\n        this.j = false;\n        {\n            var a = this.r.c;\n            while (a != null) {\n                if (a.c.b != null) {\n                    this.f.d(a.c.b);\n                    a.c.b = null;\n                    if (a.c.f != null) {\n                        a.c.f.clear();\n                    }\n                }\n                a = a.a;\n            }\n            this.ac = 0;\n        }\n        this.aa = 0;\n        this.u = 0.4;\n        this.v = 0.4;\n        var b = truncate(Math.ceil((this.ae / 150) * this.af));\n        this.ad = b;\n        this.ao();\n    };\n    LabelCollisionManager.prototype.an = function () {\n        this.s.clear();\n    };\n    LabelCollisionManager.prototype.am = function () {\n        this.j = true;\n    };\n    LabelCollisionManager.prototype.aq = function () {\n        this.k = false;\n        if (this.j) {\n            return;\n        }\n        this.ao();\n    };\n    LabelCollisionManager.prototype.ao = function () {\n        this.s.clear();\n        this.av(false);\n        if (this.e == 0) {\n            for (var a = 0; a < this.af; a++) {\n                this.v = this.u * (this.ad - this.aa) / this.ad;\n                this.ap();\n                this.aa++;\n                if (this.aa > this.ad) {\n                    if (this.h != null) {\n                        this.h();\n                    }\n                    return;\n                }\n            }\n            if (this.labelsMoved != null) {\n                this.labelsMoved(this.s);\n            }\n            if (this.ac > 0) {\n                if (!this.k) {\n                    this.k = true;\n                    this.c.executeDelayed(runOn(this, this.aq), 150);\n                }\n            }\n            else {\n                if (this.h != null) {\n                    this.h();\n                }\n            }\n        }\n        else {\n            if (this.e == 2) {\n                var b = this.r.c;\n                this.f.k();\n                while (b != null) {\n                    var c = b.c;\n                    if (c.b != null) {\n                        this.f.d(c.b);\n                        c.b = null;\n                        c.d = false;\n                        c.f = null;\n                    }\n                    b = b.a;\n                }\n                this.ac = 0;\n                this.av(true);\n            }\n            if (this.labelsMoved != null) {\n                this.labelsMoved(this.s);\n            }\n        }\n    };\n    LabelCollisionManager.prototype.ap = function () {\n        var a = truncate(Math.round((this.ab - 1) * LabelCollisionManager.aj.nextDouble()));\n        var b = 0;\n        var c = this.r.c;\n        var d = this.w(null);\n        var e = 30;\n        var f = 60;\n        while (c != null) {\n            var g = c.c;\n            var h = 0;\n            var i = 0;\n            if (this.i) {\n                h = LabelCollisionManager.aj.nextDouble() * g.l * 2;\n                i = LabelCollisionManager.aj.nextDouble() * g.k * 2;\n            }\n            if (b == a) {\n                var j = truncate(Math.round((this.t.count - 1) * LabelCollisionManager.aj.nextDouble()));\n                while (this.t._inner[j] == g.a) {\n                    j = truncate(Math.round((this.t.count - 1) * LabelCollisionManager.aj.nextDouble()));\n                }\n                var k = g.b;\n                var l = this.g(g, this.t._inner[j], h, i, false);\n                var m = 0;\n                while (l == null) {\n                    if (m >= e) {\n                        h = 0;\n                        i = 0;\n                    }\n                    if (m >= f) {\n                        break;\n                    }\n                    j = truncate(Math.round((this.t.count - 1) * LabelCollisionManager.aj.nextDouble()));\n                    l = this.g(g, this.t._inner[j], h, i, false);\n                    m++;\n                }\n                g.b = l;\n                if (k != null) {\n                    this.f.d(k);\n                }\n                if (l != null) {\n                    this.f.c(l);\n                    var n = this.w(g);\n                    var o = d > n;\n                    if (!o) {\n                        var p = Math.exp(-(n - d) / this.v);\n                        if (LabelCollisionManager.aj.nextDouble() < p) {\n                            o = true;\n                        }\n                    }\n                    if (!o && k != null) {\n                        this.f.d(l);\n                        this.f.c(k);\n                        g.b = k;\n                        if (!this.l) {\n                            this.w(g);\n                        }\n                    }\n                    else {\n                        g.a = this.t._inner[j];\n                        g.g = g.b.b;\n                        g.h = g.b.c;\n                        this.s.add(g);\n                    }\n                }\n                else {\n                    if (!this.l) {\n                        this.w(g);\n                    }\n                    g.d = false;\n                    this.s.add(g);\n                }\n                break;\n            }\n            b++;\n            c = c.a;\n        }\n    };\n    LabelCollisionManager.prototype.w = function (a) {\n        if (this.l) {\n            var b = 0;\n            var c = this.r.c;\n            while (c != null) {\n                var d = c.c;\n                var e = d.d;\n                d.d = false;\n                if (d.b != null) {\n                    var f = this.f.e(d.b);\n                    for (var g = 0; g < f.count; g++) {\n                        var h = f._inner[g].l.c;\n                        while (h != null) {\n                            var i = h.c;\n                            if (i.g == d) {\n                                h = h.a;\n                                continue;\n                            }\n                            if (d.b.a(i)) {\n                                d.d = true;\n                                b += d.b.f(i);\n                            }\n                            h = h.a;\n                        }\n                    }\n                    if (d.d != e) {\n                        this.s.add(d);\n                    }\n                }\n                c = c.a;\n            }\n            return b;\n        }\n        else {\n            if (a != null) {\n                var j = new HashSet$1(LabelCollisionInfo.$, 0);\n                var k = new HashSet$1(LabelCollisionInfo.$, 0);\n                var l = new HashSet$1(LabelCollisionInfo.$, 0);\n                var m = new List$1(LabelCollisionInfo.$, 0);\n                if (a.f != null) {\n                    for (var n = 0; n < a.f.count; n++) {\n                        j.add_1(a.f._inner[n]);\n                        k.add_1(a.f._inner[n]);\n                    }\n                }\n                var o = a.d;\n                a.d = false;\n                if (a.b != null) {\n                    var p = this.f.e(a.b);\n                    for (var q = 0; q < p.count; q++) {\n                        var r = p._inner[q].l.c;\n                        while (r != null) {\n                            var s = r.c;\n                            if (s.g == a) {\n                                r = r.a;\n                                continue;\n                            }\n                            if (a.b.a(s) && !l.contains(s.g)) {\n                                a.d = true;\n                                l.add_1(s.g);\n                                m.add(s.g);\n                            }\n                            r = r.a;\n                        }\n                    }\n                    p = this.f.e(a.c);\n                    for (var t = 0; t < p.count; t++) {\n                        var u = p._inner[t].l.c;\n                        while (u != null) {\n                            var v = u.c;\n                            if (v.g == a) {\n                                u = u.a;\n                                continue;\n                            }\n                            if (this.m(a.c, v)) {\n                                u = u.a;\n                                continue;\n                            }\n                            if (a.c.a(v) && !l.contains(v.g)) {\n                                a.d = true;\n                                l.add_1(v.g);\n                                m.add(v.g);\n                            }\n                            u = u.a;\n                        }\n                    }\n                    if (a.d != o) {\n                        this.s.add(a);\n                    }\n                    if (a.f != null) {\n                        for (var w = a.f.count - 1; w >= 0; w--) {\n                            if (!l.contains(a.f._inner[w])) {\n                                var x = a.f._inner[w];\n                                var y = x.f.remove(a);\n                                a.f.removeAt(w);\n                                if (x.f.count == 0 && y) {\n                                    this.ac--;\n                                }\n                                var z = j.remove(x);\n                                if (j.count == 0 && z) {\n                                    this.ac--;\n                                }\n                            }\n                        }\n                    }\n                    for (var aa = 0; aa < m.count; aa++) {\n                        var ab = m._inner[aa];\n                        if (!j.contains(ab)) {\n                            if (a.f == null) {\n                                a.f = new List$1(LabelCollisionInfo.$, 0);\n                            }\n                            a.f.add(ab);\n                            if (j.count == 0) {\n                                this.ac++;\n                            }\n                            j.add_1(ab);\n                            if (ab.f == null) {\n                                ab.f = new List$1(LabelCollisionInfo.$, 0);\n                            }\n                            if (ab.f.count == 0) {\n                                this.ac++;\n                            }\n                            ab.f.add(a);\n                        }\n                    }\n                }\n            }\n            return this.ac;\n        }\n    };\n    LabelCollisionManager.prototype.m = function (a, b) {\n        if (a.g.c == a && b.g.c == b) {\n            return true;\n        }\n        return false;\n    };\n    Object.defineProperty(LabelCollisionManager.prototype, \"ag\", {\n        get: function () {\n            return this.ac;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LabelCollisionManager.prototype.ay = function (a, b, c) {\n        this.a0 = c;\n        var d = new QuadTree(a, b, this.f.i, this.f.f);\n        var e = this.r.c;\n        while (e != null) {\n            d.c(e.c.c);\n            if (e.c.b != null) {\n                d.c(e.c.b);\n            }\n            e = e.a;\n        }\n        this.f = d;\n        this.z = a;\n        this.x = b;\n    };\n    LabelCollisionManager.prototype.q = function () {\n        var a = this.r.c;\n        while (a != null) {\n            a.c.d = false;\n            if (a.c.b != null) {\n                if (this.o(a.c.b)) {\n                    return true;\n                }\n            }\n            a = a.a;\n        }\n        return false;\n    };\n    LabelCollisionManager.prototype.ah = function () {\n        var a = this.r.c;\n        while (a != null) {\n            a.c.d = false;\n            a = a.a;\n        }\n        a = this.r.c;\n        while (a != null) {\n            var b = a.c.b;\n            var c = a.c.c;\n            var d = this.f.e(c);\n            for (var e = 0; e < d.count; e++) {\n                var f = d._inner[e].l.c;\n                while (f != null) {\n                    var g = f.c;\n                    if (this.m(c, g)) {\n                        f = f.a;\n                        continue;\n                    }\n                    if (c.a(g)) {\n                        var h = f.c.g;\n                        if (h != a.c) {\n                            h.d = true;\n                            a.c.d = true;\n                        }\n                    }\n                    f = f.a;\n                }\n            }\n            if (b == null) {\n                return -1;\n            }\n            d = this.f.e(b);\n            for (var i = 0; i < d.count; i++) {\n                var j = d._inner[i].l.c;\n                while (j != null) {\n                    var k = j.c;\n                    if (b.a(k)) {\n                        var l = j.c.g;\n                        if (l != a.c) {\n                            l.d = true;\n                            a.c.d = true;\n                        }\n                    }\n                    j = j.a;\n                }\n            }\n            a = a.a;\n        }\n        var m = 0;\n        a = this.r.c;\n        while (a != null) {\n            if (a.c.d) {\n                m++;\n            }\n            a = a.a;\n        }\n        return m;\n    };\n    LabelCollisionManager.prototype.av = function (a) {\n        var b = this.r.c;\n        while (b != null) {\n            var c = b.c;\n            if (c.b == null || a) {\n                var d = false;\n                if (a) {\n                    var e = this.f.a(c.o, c.p, 1.5);\n                    var f = this.a(e);\n                    for (var g = 0; g < f.length; g++) {\n                        var h = f[g];\n                        var i = this.g(c, h, 0, 0, false);\n                        if (i == null) {\n                            continue;\n                        }\n                        var j = this.f.e(i);\n                        d = true;\n                        for (var k = 0; k < j.count; k++) {\n                            var l = j._inner[k].l.c;\n                            while (l != null) {\n                                var m = l.c;\n                                if (i.a(m)) {\n                                    d = false;\n                                    break;\n                                }\n                                l = l.a;\n                            }\n                        }\n                        if (d) {\n                            c.b = i;\n                            c.a = h;\n                            c.g = c.b.b;\n                            c.h = c.b.c;\n                            this.f.c(c.b);\n                            this.s.add(c);\n                            break;\n                        }\n                    }\n                }\n                if (!d) {\n                    d = this.p(c);\n                }\n            }\n            b = b.a;\n        }\n    };\n    LabelCollisionManager.prototype.p = function (a) {\n        var b = false;\n        if (!b) {\n            for (var c = 0; c < this.t.count; c++) {\n                var d = this.g(a, this.t._inner[c], 0, 0, false);\n                if (d == null) {\n                    continue;\n                }\n                b = !this.n(d, a);\n                var e = a.c;\n                if (e == null) {\n                    e = new QuadTreeBoundingBox();\n                    e.g = a;\n                    e.b = a.o;\n                    e.c = a.p;\n                    e.e = a.n;\n                    e.d = a.m;\n                    this.f.c(e);\n                    a.c = e;\n                }\n                var f = this.n(e, a);\n                b = b && !f;\n                if (b) {\n                    a.b = d;\n                    a.a = this.t._inner[c];\n                    a.g = a.b.b;\n                    a.h = a.b.c;\n                    this.f.c(a.b);\n                    this.s.add(a);\n                    break;\n                }\n            }\n        }\n        if (!b) {\n            var g = Number.POSITIVE_INFINITY;\n            var h = 0;\n            var i = null;\n            for (var j = 0; j < this.t.count; j++) {\n                var k = 0;\n                var l = null;\n                var m = new HashSet$1(LabelCollisionInfo.$, 0);\n                if (!this.l) {\n                    l = new List$1(LabelCollisionInfo.$, 0);\n                }\n                var n = this.g(a, this.t._inner[j], 0, 0, false);\n                if (n == null) {\n                    continue;\n                }\n                var o = this.f.e(n);\n                for (var p = 0; p < o.count; p++) {\n                    var q = o._inner[p].l.c;\n                    while (q != null) {\n                        var r = q.c;\n                        if (n.a(r)) {\n                            k += n.f(r);\n                            if (!this.l) {\n                                if (!m.contains(r.g)) {\n                                    l.add(r.g);\n                                    m.add_1(r.g);\n                                }\n                            }\n                        }\n                        q = q.a;\n                    }\n                }\n                var s = a.c;\n                if (s == null) {\n                    s = new QuadTreeBoundingBox();\n                    s.g = a;\n                    s.b = a.o;\n                    s.c = a.p;\n                    s.e = a.n;\n                    s.d = a.m;\n                }\n                o = this.f.e(s);\n                for (var t = 0; t < o.count; t++) {\n                    var u = o._inner[t].l.c;\n                    while (u != null) {\n                        var v = u.c;\n                        if (u.c.g == a) {\n                            u = u.a;\n                            continue;\n                        }\n                        if (this.m(s, v)) {\n                            u = u.a;\n                            continue;\n                        }\n                        if (s.a(v)) {\n                            if (!this.l) {\n                                if (!m.contains(v.g)) {\n                                    l.add(v.g);\n                                    m.add_1(v.g);\n                                }\n                            }\n                        }\n                        u = u.a;\n                    }\n                }\n                if (k < g) {\n                    var w = this.g(a, this.t._inner[j], 0, 0, false);\n                    if (w != null) {\n                        g = k;\n                        h = j;\n                        if (!this.l) {\n                            i = l;\n                        }\n                    }\n                }\n            }\n            var x = this.g(a, this.t._inner[h], 0, 0, false);\n            a.d = true;\n            if (!this.l) {\n                if (a.f != null && a.f.count > 0) {\n                    this.ac--;\n                    for (var y = a.f.count - 1; y >= 0; y--) {\n                        var z = a.f._inner[y];\n                        if (z.f != null) {\n                            z.f.remove(a);\n                            if (z.f.count == 0) {\n                                this.ac--;\n                            }\n                        }\n                    }\n                }\n                if (i == null) {\n                    a.d = false;\n                    this.s.add(a);\n                    return false;\n                }\n                a.f = i;\n                if (i.count > 0) {\n                    this.ac++;\n                }\n                for (var aa = 0; aa < i.count; aa++) {\n                    var ab = i._inner[aa];\n                    if (ab.f == null) {\n                        ab.f = new List$1(LabelCollisionInfo.$, 0);\n                    }\n                    if (!ab.f.contains(a)) {\n                        if (ab.f.count == 0) {\n                            this.ac++;\n                        }\n                        ab.f.add(a);\n                    }\n                }\n            }\n            a.b = x;\n            a.a = this.t._inner[h];\n            a.g = a.b.b;\n            a.h = a.b.c;\n            this.f.c(a.b);\n            this.s.add(a);\n        }\n        return b;\n    };\n    LabelCollisionManager.prototype.n = function (a, b) {\n        var c = false;\n        var d = this.f.e(a);\n        for (var e = 0; e < d.count; e++) {\n            var f = d._inner[e].l.c;\n            while (f != null) {\n                if (f.c.g == b) {\n                    f = f.a;\n                    continue;\n                }\n                var g = f.c;\n                if (this.m(a, g)) {\n                    f = f.a;\n                    continue;\n                }\n                if (a.a(g)) {\n                    c = true;\n                    break;\n                }\n                f = f.a;\n            }\n        }\n        return c;\n    };\n    LabelCollisionManager.prototype.a = function (a) {\n        var b = new Array(3);\n        var c = GeometryUtil.e({ $type: Point_$type, x: 0, y: 0 }, { $type: Point_$type, x: a.a, y: a.b });\n        c = c * 180 / Math.PI;\n        c = GeometryUtil.g(c);\n        if ((c >= 0 && c <= 22.5) || (c >= 337.5 && c <= 360)) {\n            b[0] = 2;\n            b[1] = 5;\n            b[2] = 7;\n        }\n        if (c >= 22.5 && c <= 67.5) {\n            b[0] = 2;\n            b[1] = 7;\n            b[2] = 3;\n        }\n        if (c >= 67.5 && c <= 112.5) {\n            b[0] = 7;\n            b[1] = 3;\n            b[2] = 6;\n        }\n        if (c >= 112.5 && c <= 157.5) {\n            b[0] = 3;\n            b[1] = 6;\n            b[2] = 1;\n        }\n        if (c >= 157.5 && c <= 202.5) {\n            b[0] = 6;\n            b[1] = 1;\n            b[2] = 4;\n        }\n        if (c >= 202.5 && c <= 247.5) {\n            b[0] = 1;\n            b[1] = 4;\n            b[2] = 0;\n        }\n        if (c >= 247.5 && c <= 292.5) {\n            b[0] = 4;\n            b[1] = 0;\n            b[2] = 5;\n        }\n        if (c >= 292.5 && c <= 337.5) {\n            b[0] = 0;\n            b[1] = 5;\n            b[2] = 2;\n        }\n        return b;\n    };\n    LabelCollisionManager.prototype.d = function (a, b) {\n        var c = false;\n        var d = null;\n        var e = new QuadTreeBoundingBox();\n        e.b = a.x;\n        e.c = a.y;\n        e.e = 5;\n        e.d = 5;\n        var f = this.f.e(e);\n        for (var g = 0; g < f.count; g++) {\n            var h = f._inner[g].l.c;\n            while (h != null) {\n                var i = h.c;\n                if (i.g.c == i) {\n                    h = h.a;\n                    continue;\n                }\n                if (e.a(i)) {\n                    d = i;\n                    c = true;\n                    break;\n                }\n                h = h.a;\n            }\n        }\n        if (c) {\n            return d.g;\n        }\n        else {\n            return null;\n        }\n    };\n    LabelCollisionManager.$t = markType(LabelCollisionManager, 'LabelCollisionManager');\n    LabelCollisionManager.aj = new Random(0);\n    return LabelCollisionManager;\n}(Base));\nexport { LabelCollisionManager };\n//# sourceMappingURL=LabelCollisionManager.js.map\n"]},"metadata":{},"sourceType":"module"}