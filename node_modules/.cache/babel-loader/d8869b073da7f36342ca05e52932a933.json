{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, markType } from \"./type\";\nimport { QuadTreeBoundingBox } from \"./QuadTreeBoundingBox\";\nimport { List$1 } from \"./List$1\";\nimport { HashSet$1 } from \"./HashSet$1\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { QuadTreeForceVector } from \"./QuadTreeForceVector\";\n/**\n * @hidden\n */\n\nvar QuadTree =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(QuadTree, _super);\n\n  function QuadTree(a, b, c, d) {\n    var _this = _super.call(this) || this;\n\n    _this.b = null;\n    _this.f = 0;\n    _this.i = 0;\n    _this.b = new QuadTreeNode();\n    _this.b.b = _this;\n    _this.b.c = new QuadTreeBoundingBox();\n    var e = Math.max(a, b);\n    _this.b.c.b = e / 2;\n    _this.b.c.c = e / 2;\n    _this.b.c.e = e / 2;\n    _this.b.c.d = e / 2;\n    _this.f = d;\n    _this.i = c;\n    return _this;\n  }\n\n  QuadTree.prototype.c = function (a) {\n    return this.b.i(a);\n  };\n\n  QuadTree.prototype.d = function (a) {\n    return this.b.k(a);\n  };\n\n  QuadTree.prototype.e = function (a) {\n    var b = new List$1(QuadTreeNode.$, 0);\n    this.b.x(a, b);\n    return b;\n  };\n\n  QuadTree.prototype.j = function () {\n    this.b.w();\n  };\n\n  QuadTree.prototype.k = function () {\n    this.b.z();\n  };\n\n  QuadTree.prototype.g = function () {\n    return this.h(this.b, new HashSet$1(QuadTreeBoundingBox.$, 0));\n  };\n\n  QuadTree.prototype.h = function (a, b) {\n    if (a.j) {\n      var c = 0;\n      var d = a.l.c;\n\n      while (d != null) {\n        if (!b.contains(d.c)) {\n          c += 1;\n          b.add_1(d.c);\n        }\n\n        d = d.a;\n      }\n\n      return c;\n    }\n\n    var e = this.h(a.f, b);\n    e += this.h(a.e, b);\n    e += this.h(a.h, b);\n    e += this.h(a.g, b);\n    return e;\n  };\n\n  QuadTree.prototype.a = function (a, b, c) {\n    return this.b.d(a, b, c);\n  };\n\n  QuadTree.$t = markType(QuadTree, 'QuadTree');\n  return QuadTree;\n}(Base);\n\nexport { QuadTree };\n/**\n * @hidden\n */\n\nvar QuadTreeNode =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(QuadTreeNode, _super);\n\n  function QuadTreeNode() {\n    var _this = _super.call(this) || this;\n\n    _this.b = null;\n    _this.l = null;\n    _this.t = 0;\n    _this.c = null;\n    _this.q = 0;\n    _this.a = null;\n    _this.m = 0;\n    _this.n = 0;\n    _this.o = 0;\n    _this.m = 0;\n    _this.n = 0;\n    _this.o = 0;\n    _this.l = new LinkedList$1(QuadTreeBoundingBox.$);\n    _this.a = new Array(4);\n    _this.c = new QuadTreeBoundingBox();\n\n    for (var a = 0; a < 4; a++) {\n      _this.a[a] = null;\n    }\n\n    return _this;\n  }\n\n  QuadTreeNode.prototype.k = function (a) {\n    if (!this.c.a(a)) {\n      return false;\n    }\n\n    var b = this.f == null && this.e == null && this.h == null && this.g == null;\n\n    if (b) {\n      var c = this.l.c;\n\n      while (c != null) {\n        if (c.c == a) {\n          this.l.h(c);\n          this.t--;\n          return true;\n        }\n\n        c = c.a;\n      }\n\n      return false;\n    }\n\n    this.f.k(a);\n    this.e.k(a);\n    this.h.k(a);\n    this.g.k(a);\n    return false;\n  };\n\n  Object.defineProperty(QuadTreeNode.prototype, \"j\", {\n    get: function () {\n      return this.f == null && this.e == null && this.h == null && this.g == null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  QuadTreeNode.prototype.x = function (a, b) {\n    if (!this.c.a(a)) {\n      return;\n    }\n\n    if (this.j) {\n      b.add(this);\n      return;\n    }\n\n    this.f.x(a, b);\n    this.e.x(a, b);\n    this.h.x(a, b);\n    this.g.x(a, b);\n  };\n\n  QuadTreeNode.prototype.w = function () {\n    if (this.f != null) {\n      this.f.w();\n    }\n\n    if (this.e != null) {\n      this.e.w();\n    }\n\n    if (this.h != null) {\n      this.h.w();\n    }\n\n    if (this.g != null) {\n      this.h.w();\n    }\n\n    if (this.f.j && this.f.t == 0 && this.e.j && this.e.t == 0 && this.h.j && this.h.t == 0 && this.g.j && this.g.t == 0) {\n      this.f = null;\n      this.e = null;\n      this.h = null;\n      this.g = null;\n      return;\n    }\n  };\n\n  QuadTreeNode.prototype.i = function (a) {\n    if (!this.c.a(a)) {\n      return false;\n    }\n\n    var b = this.f == null && this.e == null && this.h == null && this.g == null;\n\n    if (b && this.t < this.b.f) {\n      this.l.f(a);\n      this.t++;\n      return true;\n    } else if (b && this.q < this.b.i) {\n      this.y();\n    } else if (b) {\n      this.l.f(a);\n      this.t++;\n      return true;\n    }\n\n    var c = this.f.i(a);\n    c = this.e.i(a) || c;\n    c = this.h.i(a) || c;\n    c = this.g.i(a) || c;\n    return c;\n  };\n\n  QuadTreeNode.prototype.y = function () {\n    this.f = new QuadTreeNode();\n    this.e = new QuadTreeNode();\n    this.h = new QuadTreeNode();\n    this.g = new QuadTreeNode();\n    var a = this.c.e / 2;\n    this.f.c.b = this.c.b - a;\n    this.f.c.c = this.c.c - a;\n    this.e.c.b = this.c.b + a;\n    this.e.c.c = this.c.c - a;\n    this.h.c.b = this.c.b - a;\n    this.h.c.c = this.c.c + a;\n    this.g.c.b = this.c.b + a;\n    this.g.c.c = this.c.c + a;\n\n    for (var b = 0; b < 4; b++) {\n      this.a[b].q = this.q + 1;\n      this.a[b].c.e = a;\n      this.a[b].c.d = a;\n      this.a[b].b = this.b;\n    }\n\n    var c = this.l.c;\n\n    while (c != null) {\n      var d = c.c;\n      this.f.i(d);\n      this.e.i(d);\n      this.h.i(d);\n      this.g.i(d);\n      c = c.a;\n    }\n\n    this.l.g();\n    this.t = 0;\n  };\n\n  QuadTreeNode.prototype.z = function () {\n    if (this.j) {\n      var a = 0;\n      var b = 0;\n      var c = this.l.c;\n\n      while (c != null) {\n        var d = c.c;\n        a += d.b;\n        b += d.c;\n        c = c.a;\n      }\n\n      if (this.t == 0) {\n        this.m = 0;\n        this.n = 0;\n        this.o = 0;\n      } else {\n        this.m = a / this.t;\n        this.n = b / this.t;\n        this.o = this.t;\n      }\n    } else {\n      this.f.z();\n      this.h.z();\n      this.e.z();\n      this.g.z();\n      var e = 0;\n      var f = 0;\n      var g = 0;\n\n      for (var h = 0; h < 4; h++) {\n        g += this.a[h].o;\n        e += this.a[h].m * this.a[h].o;\n        f += this.a[h].n * this.a[h].o;\n      }\n\n      if (this.o > 0) {\n        this.m = e / g;\n        this.n = f / g;\n      }\n\n      this.o = g;\n    }\n  };\n\n  QuadTreeNode.prototype.d = function (a, b, c) {\n    var d = Math.sqrt((a - this.m) * (a - this.m) + (b - this.n) * (b - this.n));\n    var e = this.c.e * 2;\n\n    if (e / d < c || this.j) {\n      var f_1 = (a - this.m) * this.o / (d * d);\n      var g_1 = (b - this.n) * this.o / (d * d);\n      return function () {\n        var $ret = new QuadTreeForceVector();\n        $ret.a = f_1;\n        $ret.b = g_1;\n        return $ret;\n      }();\n    } else {\n      var h_1 = 0;\n      var i_1 = 0;\n\n      for (var j = 0; j < 4; j++) {\n        var k = this.a[j].d(a, b, c);\n        h_1 += k.a;\n        i_1 += k.b;\n      }\n\n      return function () {\n        var $ret = new QuadTreeForceVector();\n        $ret.a = h_1;\n        $ret.b = i_1;\n        return $ret;\n      }();\n    }\n  };\n\n  Object.defineProperty(QuadTreeNode.prototype, \"f\", {\n    get: function () {\n      return this.a[0];\n    },\n    set: function (a) {\n      this.a[0] = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuadTreeNode.prototype, \"e\", {\n    get: function () {\n      return this.a[1];\n    },\n    set: function (a) {\n      this.a[1] = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuadTreeNode.prototype, \"h\", {\n    get: function () {\n      return this.a[2];\n    },\n    set: function (a) {\n      this.a[2] = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuadTreeNode.prototype, \"g\", {\n    get: function () {\n      return this.a[3];\n    },\n    set: function (a) {\n      this.a[3] = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  QuadTreeNode.$t = markType(QuadTreeNode, 'QuadTreeNode');\n  return QuadTreeNode;\n}(Base);\n\nexport { QuadTreeNode };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/QuadTree_combined.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, markType } from \"./type\";\nimport { QuadTreeBoundingBox } from \"./QuadTreeBoundingBox\";\nimport { List$1 } from \"./List$1\";\nimport { HashSet$1 } from \"./HashSet$1\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { QuadTreeForceVector } from \"./QuadTreeForceVector\";\n/**\n * @hidden\n */\nvar QuadTree = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QuadTree, _super);\n    function QuadTree(a, b, c, d) {\n        var _this = _super.call(this) || this;\n        _this.b = null;\n        _this.f = 0;\n        _this.i = 0;\n        _this.b = new QuadTreeNode();\n        _this.b.b = _this;\n        _this.b.c = new QuadTreeBoundingBox();\n        var e = Math.max(a, b);\n        _this.b.c.b = e / 2;\n        _this.b.c.c = e / 2;\n        _this.b.c.e = e / 2;\n        _this.b.c.d = e / 2;\n        _this.f = d;\n        _this.i = c;\n        return _this;\n    }\n    QuadTree.prototype.c = function (a) {\n        return this.b.i(a);\n    };\n    QuadTree.prototype.d = function (a) {\n        return this.b.k(a);\n    };\n    QuadTree.prototype.e = function (a) {\n        var b = new List$1(QuadTreeNode.$, 0);\n        this.b.x(a, b);\n        return b;\n    };\n    QuadTree.prototype.j = function () {\n        this.b.w();\n    };\n    QuadTree.prototype.k = function () {\n        this.b.z();\n    };\n    QuadTree.prototype.g = function () {\n        return this.h(this.b, new HashSet$1(QuadTreeBoundingBox.$, 0));\n    };\n    QuadTree.prototype.h = function (a, b) {\n        if (a.j) {\n            var c = 0;\n            var d = a.l.c;\n            while (d != null) {\n                if (!b.contains(d.c)) {\n                    c += 1;\n                    b.add_1(d.c);\n                }\n                d = d.a;\n            }\n            return c;\n        }\n        var e = this.h(a.f, b);\n        e += this.h(a.e, b);\n        e += this.h(a.h, b);\n        e += this.h(a.g, b);\n        return e;\n    };\n    QuadTree.prototype.a = function (a, b, c) {\n        return this.b.d(a, b, c);\n    };\n    QuadTree.$t = markType(QuadTree, 'QuadTree');\n    return QuadTree;\n}(Base));\nexport { QuadTree };\n/**\n * @hidden\n */\nvar QuadTreeNode = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QuadTreeNode, _super);\n    function QuadTreeNode() {\n        var _this = _super.call(this) || this;\n        _this.b = null;\n        _this.l = null;\n        _this.t = 0;\n        _this.c = null;\n        _this.q = 0;\n        _this.a = null;\n        _this.m = 0;\n        _this.n = 0;\n        _this.o = 0;\n        _this.m = 0;\n        _this.n = 0;\n        _this.o = 0;\n        _this.l = new LinkedList$1(QuadTreeBoundingBox.$);\n        _this.a = new Array(4);\n        _this.c = new QuadTreeBoundingBox();\n        for (var a = 0; a < 4; a++) {\n            _this.a[a] = null;\n        }\n        return _this;\n    }\n    QuadTreeNode.prototype.k = function (a) {\n        if (!this.c.a(a)) {\n            return false;\n        }\n        var b = this.f == null && this.e == null && this.h == null && this.g == null;\n        if (b) {\n            var c = this.l.c;\n            while (c != null) {\n                if (c.c == a) {\n                    this.l.h(c);\n                    this.t--;\n                    return true;\n                }\n                c = c.a;\n            }\n            return false;\n        }\n        this.f.k(a);\n        this.e.k(a);\n        this.h.k(a);\n        this.g.k(a);\n        return false;\n    };\n    Object.defineProperty(QuadTreeNode.prototype, \"j\", {\n        get: function () {\n            return this.f == null && this.e == null && this.h == null && this.g == null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    QuadTreeNode.prototype.x = function (a, b) {\n        if (!this.c.a(a)) {\n            return;\n        }\n        if (this.j) {\n            b.add(this);\n            return;\n        }\n        this.f.x(a, b);\n        this.e.x(a, b);\n        this.h.x(a, b);\n        this.g.x(a, b);\n    };\n    QuadTreeNode.prototype.w = function () {\n        if (this.f != null) {\n            this.f.w();\n        }\n        if (this.e != null) {\n            this.e.w();\n        }\n        if (this.h != null) {\n            this.h.w();\n        }\n        if (this.g != null) {\n            this.h.w();\n        }\n        if (this.f.j && this.f.t == 0 && this.e.j && this.e.t == 0 && this.h.j && this.h.t == 0 && this.g.j && this.g.t == 0) {\n            this.f = null;\n            this.e = null;\n            this.h = null;\n            this.g = null;\n            return;\n        }\n    };\n    QuadTreeNode.prototype.i = function (a) {\n        if (!this.c.a(a)) {\n            return false;\n        }\n        var b = this.f == null && this.e == null && this.h == null && this.g == null;\n        if (b && this.t < this.b.f) {\n            this.l.f(a);\n            this.t++;\n            return true;\n        }\n        else if (b && this.q < this.b.i) {\n            this.y();\n        }\n        else if (b) {\n            this.l.f(a);\n            this.t++;\n            return true;\n        }\n        var c = this.f.i(a);\n        c = this.e.i(a) || c;\n        c = this.h.i(a) || c;\n        c = this.g.i(a) || c;\n        return c;\n    };\n    QuadTreeNode.prototype.y = function () {\n        this.f = new QuadTreeNode();\n        this.e = new QuadTreeNode();\n        this.h = new QuadTreeNode();\n        this.g = new QuadTreeNode();\n        var a = this.c.e / 2;\n        this.f.c.b = this.c.b - a;\n        this.f.c.c = this.c.c - a;\n        this.e.c.b = this.c.b + a;\n        this.e.c.c = this.c.c - a;\n        this.h.c.b = this.c.b - a;\n        this.h.c.c = this.c.c + a;\n        this.g.c.b = this.c.b + a;\n        this.g.c.c = this.c.c + a;\n        for (var b = 0; b < 4; b++) {\n            this.a[b].q = this.q + 1;\n            this.a[b].c.e = a;\n            this.a[b].c.d = a;\n            this.a[b].b = this.b;\n        }\n        var c = this.l.c;\n        while (c != null) {\n            var d = c.c;\n            this.f.i(d);\n            this.e.i(d);\n            this.h.i(d);\n            this.g.i(d);\n            c = c.a;\n        }\n        this.l.g();\n        this.t = 0;\n    };\n    QuadTreeNode.prototype.z = function () {\n        if (this.j) {\n            var a = 0;\n            var b = 0;\n            var c = this.l.c;\n            while (c != null) {\n                var d = c.c;\n                a += d.b;\n                b += d.c;\n                c = c.a;\n            }\n            if (this.t == 0) {\n                this.m = 0;\n                this.n = 0;\n                this.o = 0;\n            }\n            else {\n                this.m = a / this.t;\n                this.n = b / this.t;\n                this.o = this.t;\n            }\n        }\n        else {\n            this.f.z();\n            this.h.z();\n            this.e.z();\n            this.g.z();\n            var e = 0;\n            var f = 0;\n            var g = 0;\n            for (var h = 0; h < 4; h++) {\n                g += this.a[h].o;\n                e += this.a[h].m * this.a[h].o;\n                f += this.a[h].n * this.a[h].o;\n            }\n            if (this.o > 0) {\n                this.m = e / g;\n                this.n = f / g;\n            }\n            this.o = g;\n        }\n    };\n    QuadTreeNode.prototype.d = function (a, b, c) {\n        var d = Math.sqrt((a - this.m) * (a - this.m) + (b - this.n) * (b - this.n));\n        var e = this.c.e * 2;\n        if (e / d < c || this.j) {\n            var f_1 = (a - this.m) * this.o / (d * d);\n            var g_1 = (b - this.n) * this.o / (d * d);\n            return ((function () {\n                var $ret = new QuadTreeForceVector();\n                $ret.a = f_1;\n                $ret.b = g_1;\n                return $ret;\n            })());\n        }\n        else {\n            var h_1 = 0;\n            var i_1 = 0;\n            for (var j = 0; j < 4; j++) {\n                var k = this.a[j].d(a, b, c);\n                h_1 += k.a;\n                i_1 += k.b;\n            }\n            return ((function () {\n                var $ret = new QuadTreeForceVector();\n                $ret.a = h_1;\n                $ret.b = i_1;\n                return $ret;\n            })());\n        }\n    };\n    Object.defineProperty(QuadTreeNode.prototype, \"f\", {\n        get: function () {\n            return this.a[0];\n        },\n        set: function (a) {\n            this.a[0] = a;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuadTreeNode.prototype, \"e\", {\n        get: function () {\n            return this.a[1];\n        },\n        set: function (a) {\n            this.a[1] = a;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuadTreeNode.prototype, \"h\", {\n        get: function () {\n            return this.a[2];\n        },\n        set: function (a) {\n            this.a[2] = a;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuadTreeNode.prototype, \"g\", {\n        get: function () {\n            return this.a[3];\n        },\n        set: function (a) {\n            this.a[3] = a;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    QuadTreeNode.$t = markType(QuadTreeNode, 'QuadTreeNode');\n    return QuadTreeNode;\n}(Base));\nexport { QuadTreeNode };\n//# sourceMappingURL=QuadTree_combined.js.map\n"]},"metadata":{},"sourceType":"module"}