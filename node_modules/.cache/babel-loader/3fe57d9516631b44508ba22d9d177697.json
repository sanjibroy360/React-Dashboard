{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { AnnotationLayer } from \"./AnnotationLayer\";\nimport { Series } from \"./Series\";\nimport { DependencyProperty } from \"igniteui-react-core\";\nimport { ItemTooltipLayerFrame } from \"./ItemTooltipLayerFrame\";\nimport { Base, fromEnum, Point_$type, markType, markDep, runOn, String_$type, typeCast } from \"igniteui-react-core\";\nimport { Pool$1 } from \"igniteui-react-core\";\nimport { List$1 } from \"igniteui-react-core\";\nimport { ItemTooltipCollisionInfo } from \"./ItemTooltipCollisionInfo\";\nimport { Rect } from \"igniteui-react-core\";\nimport { DataContext } from \"igniteui-react-core\";\nimport { Size } from \"igniteui-react-core\";\nimport { DeviceUtils } from \"igniteui-react-core\";\nimport { PropertyMetadata } from \"igniteui-react-core\";\nimport { isNaN_ } from \"igniteui-react-core\";\nimport { AnnotationLayerView } from \"./AnnotationLayerView\";\nimport { PointerTooltip } from \"./PointerTooltip\";\nimport { DomWrapper_$type } from \"igniteui-react-core\";\n/**\n * @hidden\n */\n\nvar ItemToolTipLayer =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(ItemToolTipLayer, _super);\n\n  function ItemToolTipLayer() {\n    var _this = _super.call(this) || this;\n\n    var a = new ItemTooltipLayerFrame();\n    var b = new ItemTooltipLayerFrame();\n    var c = new ItemTooltipLayerFrame();\n    var d = _this.fi / 1000;\n    _this.l3 = a;\n    _this.l2 = b;\n    _this.l4 = c;\n    _this.ab = ItemToolTipLayer.$;\n    return _this;\n  }\n\n  ItemToolTipLayer.prototype.bf = function () {\n    return new ItemToolTipLayerView(this);\n  };\n\n  ItemToolTipLayer.prototype.iv = function (a) {\n    _super.prototype.iv.call(this, a);\n\n    this.m5 = a;\n  };\n\n  ItemToolTipLayer.prototype.get_cn = function () {\n    return true;\n  };\n\n  ItemToolTipLayer.prototype.i0 = function (a, b, c, d) {\n    _super.prototype.i0.call(this, a, b, c, d);\n\n    switch (b) {\n      case ItemToolTipLayer.$$p[1]:\n        this.je(true);\n        break;\n\n      case ItemToolTipLayer.$$p[2]:\n        this.je(true);\n        break;\n\n      case ItemToolTipLayer.$$p[0]:\n        this.je(true);\n        break;\n    }\n  };\n\n  ItemToolTipLayer.prototype.mm = function (a, b) {\n    if (this.m6 == null || this.m6 == a) {\n      if (!this.aq.c) {\n        this.je(b);\n      }\n    }\n  };\n\n  ItemToolTipLayer.prototype.l9 = function (a) {\n    if (!_super.prototype.l9.call(this, a)) {\n      return false;\n    }\n\n    var b = this.mh(a);\n\n    if (!b.c) {\n      return false;\n    }\n\n    return true;\n  };\n\n  ItemToolTipLayer.prototype.mo = function (a, b) {\n    var e_1, _a;\n\n    _super.prototype.mo.call(this, a, b);\n\n    var c = a;\n    var d = this.m5.b2;\n    var e = this.m9;\n    var f = this.m8;\n    c.o.clear();\n    c.i.clear();\n    c.n.clear();\n    c.g.clear();\n    c.f.clear();\n    c.l.clear();\n    c.j.clear();\n    c.m.clear();\n    c.k.clear();\n    c.h.clear();\n\n    if (isNaN_(this.m2.x) && isNaN_(this.m2.y)) {\n      d.count = 0;\n      return;\n    }\n\n    var g = 0;\n\n    if (this.l9(this.m6)) {\n      this.nf(this.m6, c, e, f, 0);\n      g++;\n    } else {\n      try {\n        for (var _b = tslib_1.__values(fromEnum(this.bs.series)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var h = _c.value;\n\n          if (this.l9(h)) {\n            this.nf(h, c, e, f, g);\n            g++;\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      this.ne(c);\n    }\n\n    d.count = g;\n  };\n\n  ItemToolTipLayer.prototype.ne = function (a) {\n    var b = new List$1(ItemTooltipCollisionInfo.$, 0);\n\n    for (var c = 0; c < a.f.count; c++) {\n      var d = new ItemTooltipCollisionInfo();\n      d.d = c;\n      d.e = {\n        $type: Point_$type,\n        x: a.f._inner[c],\n        y: a.g._inner[c]\n      };\n      d.c = a.m._inner[c];\n      d.a = a.k._inner[c];\n      d.b = a.o._inner[c];\n\n      if (isNaN_(d.e.x) || isNaN_(d.e.y)) {\n        continue;\n      }\n\n      b.add(d);\n    }\n\n    b.aa(function (e, f) {\n      if (e.e.y < f.e.y) {\n        return -1;\n      }\n\n      if (e.e.y > f.e.y) {\n        return 1;\n      }\n\n      if (e.b < f.b) {\n        return -1;\n      }\n\n      if (e.b > f.b) {\n        return 1;\n      }\n\n      return 0;\n    });\n    var e = this.m7(b);\n\n    if (!e) {\n      return;\n    }\n\n    for (var f = 0; f < b.count - 1; f++) {\n      var g = b._inner[f];\n      var h = b._inner[f + 1];\n      var i = new Rect(0, g.e.x, g.e.y, g.c, g.a);\n      var j = new Rect(0, h.e.x, h.e.y, h.c, h.a);\n\n      if (i.intersectsWith(j) || i.top > j.bottom) {\n        h.e = {\n          $type: Point_$type,\n          x: h.e.x,\n          y: i.bottom + 1\n        };\n      }\n    }\n\n    if (b._inner[b.count - 1].e.y + b._inner[b.count - 1].a > this.bi.br.height) {\n      b._inner[b.count - 1].e = {\n        $type: Point_$type,\n        x: b._inner[b.count - 1].e.x,\n        y: b._inner[b.count - 1].e.y - (b._inner[b.count - 1].e.y + b._inner[b.count - 1].a - this.bi.br.height)\n      };\n    }\n\n    for (var k = b.count - 1; k >= 1; k--) {\n      var l = b._inner[k];\n      var m = b._inner[k - 1];\n      var n = new Rect(0, l.e.x, l.e.y, l.c, l.a);\n      var o = new Rect(0, m.e.x, m.e.y, m.c, m.a);\n\n      if (n.intersectsWith(o) || n.top < o.bottom) {\n        m.e = {\n          $type: Point_$type,\n          x: m.e.x,\n          y: n.top - (o.height + 1)\n        };\n      }\n    }\n\n    for (var p = 0; p < b.count; p++) {\n      var q = b._inner[p].d;\n      var r = b._inner[p];\n      a.f._inner[q] = r.e.x;\n      a.g._inner[q] = r.e.y;\n    }\n  };\n\n  ItemToolTipLayer.prototype.m7 = function (a) {\n    if (a.count <= 1) {\n      return false;\n    }\n\n    var b = this.bi.br;\n\n    for (var c = 0; c < a.count - 1; c++) {\n      var d = a._inner[c];\n      var e = a._inner[c + 1];\n      var f = new Rect(0, d.e.x, d.e.y, d.c, d.a);\n      var g = new Rect(0, e.e.x, e.e.y, e.c, e.a);\n\n      if (f.intersectsWith(g)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ItemToolTipLayer.prototype.nf = function (a, b, c, d, e) {\n    var f = this.mh(a);\n\n    if (!f.c) {\n      return;\n    }\n\n    var g = a.lm(f.d, c, d);\n    var h = this.m5.b2;\n    var i = this.na(a);\n    var j = this.m2;\n\n    if (!c) {\n      j = this.lp(g);\n    }\n\n    var k = a.fp(j);\n    var l = h.item(e);\n    var m = this.bi.br;\n    var n = null;\n\n    if (a.co && k != null) {\n      n = a.as(k);\n    } else {\n      n = new DataContext();\n      n.item = k;\n      n.series = a;\n    }\n\n    if (!this.m5.b3(a, l, i, n)) {\n      return;\n    }\n\n    var o = this.m5.cd(l, i, n);\n    b.i.add1(l);\n    b.j.add1(n);\n    b.l.add1(i);\n    var p = g.x;\n    var q = g.x;\n    q = Math.max(q, m.left);\n    q = Math.min(q, m.right);\n    b.n.add(q);\n    var r = g.y;\n    r = Math.max(r, m.top);\n    r = Math.min(r, m.bottom);\n    b.o.add(r);\n    var s = DeviceUtils.g(10);\n    var t = g.x + s;\n\n    if (t + o.width > m.right) {\n      t = p - o.width - s;\n    }\n\n    if (t < m.left) {\n      t = m.left;\n    }\n\n    b.f.add(t);\n    var u = g.y - o.height - s;\n\n    if (u + o.height > m.bottom) {\n      u = m.bottom - o.height - s;\n    }\n\n    if (u < m.top) {\n      u = m.top;\n    }\n\n    b.g.add(u);\n    b.m.add(o.width);\n    b.k.add(o.height);\n    var v = this.k4;\n\n    if (v == null) {\n      v = this.k6;\n    }\n\n    if (v == null) {\n      v = a.k4;\n    }\n\n    b.h.add(v);\n  };\n\n  ItemToolTipLayer.prototype.na = function (a) {\n    return a.toolTip;\n  };\n\n  ItemToolTipLayer.prototype.ib = function () {\n    this.m2 = {\n      $type: Point_$type,\n      x: NaN,\n      y: NaN\n    };\n    this.m5.cb();\n  };\n\n  ItemToolTipLayer.prototype.mr = function (a, b) {\n    _super.prototype.mr.call(this, a, b);\n\n    var c = a;\n    var d = c.o.count;\n    var e = b.br.left;\n    var f = b.br.right;\n    var g = b.br.top;\n    var h = b.br.bottom;\n\n    for (var i = 0; i < d; i++) {\n      if (isNaN_(c.n._inner[i]) || isNaN_(c.o._inner[i]) || isNaN_(c.f._inner[i]) || isNaN_(c.g._inner[i]) || c.l._inner[i] == null || c.j._inner[i] == null) {\n        this.m5.ca(c.i._inner[i]);\n        continue;\n      }\n\n      var j = c.f._inner[i];\n      var k = c.g._inner[i];\n      var l = c.m._inner[i];\n      var m = c.k._inner[i];\n      var n = false;\n\n      if (j < e && Math.abs(j - e) > 1) {\n        n = true;\n      }\n\n      if (k < g && Math.abs(k - g) > 1) {\n        n = true;\n      }\n\n      if (j + l > f && Math.abs(j + l - f) > 1) {\n        n = true;\n      }\n\n      if (k + m > h && Math.abs(k + m - h) > 1) {\n        n = true;\n      }\n\n      if (n) {\n        this.m5.ca(c.i._inner[i]);\n        continue;\n      }\n\n      var o = c.i._inner[i];\n      var p = Math.min(c.f._inner[i], c.n._inner[i]);\n      var q = Math.min(c.g._inner[i], c.o._inner[i]);\n      var r = c.n._inner[i] - c.f._inner[i];\n      var s = c.o._inner[i] - c.g._inner[i];\n      this.m5.cc(o, p, q, r, s);\n    }\n  };\n\n  ItemToolTipLayer.prototype.c8 = function () {\n    return true;\n  };\n\n  ItemToolTipLayer.$t = markType(ItemToolTipLayer, 'ItemToolTipLayer', AnnotationLayer.$);\n  ItemToolTipLayer.$$p = markDep(DependencyProperty, PropertyMetadata, ItemToolTipLayer, 'raisePropertyChanged', ['SkipUnknownValues:m8:ng', [0, true], 'TargetSeries:m6:nh', [Series.$, null], 'UseInterpolation:m9:ni', [0, false]]);\n  return ItemToolTipLayer;\n}(AnnotationLayer);\n\nexport { ItemToolTipLayer };\n/**\n * @hidden\n */\n\nvar ItemToolTipLayerView =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(ItemToolTipLayerView, _super);\n\n  function ItemToolTipLayerView(a) {\n    var _this = _super.call(this, a) || this;\n\n    _this.b1 = null;\n    _this.b2 = null;\n    _this.b4 = null;\n    _this._htmlTest = null;\n    _this.b1 = a;\n    _this.b4 = new List$1(PointerTooltip.$, 0);\n    return _this;\n  }\n\n  ItemToolTipLayerView.prototype.ap = function () {\n    var _this = this;\n\n    _super.prototype.ap.call(this);\n\n    this.b2 = function () {\n      var $ret = new Pool$1(Base.$);\n      $ret.create = runOn(_this, _this.b5);\n      $ret.activate = runOn(_this, _this.b7);\n      $ret.disactivate = runOn(_this, _this.b9);\n      $ret.destroy = runOn(_this, _this.b8);\n      return $ret;\n    }();\n\n    this.htmlTest = /^[^<]*(<[\\w\\W]+>)[^>]*$/;\n  };\n\n  ItemToolTipLayerView.prototype.ag = function () {\n    _super.prototype.ag.call(this);\n\n    for (var a = 0; a < this.b2.a.count; a++) {\n      this.b2.a._inner[a].bo();\n    }\n\n    for (var b = 0; b < this.b2.b.count; b++) {\n      this.b2.b._inner[b].bo();\n    }\n\n    this.b2.clear();\n  };\n\n  ItemToolTipLayerView.prototype.b5 = function () {\n    var a = new PointerTooltip();\n    a.bs(this.e.e4);\n    a._visibility = 1;\n    a.ao = this.e.bs.bn.j;\n    this.b4.add(a);\n    return a;\n  };\n\n  ItemToolTipLayerView.prototype.b7 = function (a) {\n    var b = a;\n  };\n\n  ItemToolTipLayerView.prototype.b9 = function (a) {\n    var b = a;\n    b._visibility = 1;\n  };\n\n  ItemToolTipLayerView.prototype.b8 = function (a) {\n    var b = a;\n    b.bv();\n    b.content = null;\n    this.b4.remove1(a);\n  };\n\n  Object.defineProperty(ItemToolTipLayerView.prototype, \"htmlTest\", {\n    get: function () {\n      return this._htmlTest;\n    },\n    set: function (a) {\n      this._htmlTest = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ItemToolTipLayerView.prototype.b3 = function (a, b, c, d) {\n    var e = b;\n\n    if (a.fz == \"default\") {\n      a.fz = a.bi.getDefaultTooltipTemplate();\n    }\n\n    var template_ = a.fz;\n    var context_ = d;\n\n    if (a.toolTip == null) {\n      return false;\n    }\n\n    var tooltip_ = a.toolTip;\n\n    if (tooltip_.updateToolTip) {\n      tooltip_._inPointer = true;\n      tooltip_.updateToolTip(context_, true);\n      tooltip_.setStyleProperty('position', 'relative');\n      tooltip_.setStyleProperty('left', '');\n      tooltip_.setStyleProperty('top', '');\n    }\n\n    e.content = a.toolTip;\n    return true;\n  };\n\n  ItemToolTipLayerView.prototype.cd = function (a, b, c) {\n    var d = a;\n    var e = d.content;\n    var f = new Size(1, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n    d.ct = 1;\n    var g = d.cs(new Size(1, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY));\n    d.ct = 0;\n    return g;\n  };\n\n  ItemToolTipLayerView.prototype.cc = function (a, b, c, d, e) {\n    var f = null;\n\n    if (this.e.bs != null) {\n      f = this.e.bs.bn.i.i();\n    }\n\n    var g = a;\n    g.ap = f;\n    var h = g.content;\n    g.cn = {\n      $type: Point_$type,\n      x: d,\n      y: e\n    };\n    g._visibility = 0;\n    g.n = b;\n    g.o = c;\n  };\n\n  ItemToolTipLayerView.prototype.ca = function (a) {\n    if (a != null) {\n      var b = a;\n      b._visibility = 1;\n    }\n  };\n\n  ItemToolTipLayerView.prototype.a3 = function (a, b) {\n    _super.prototype.a3.call(this, a, b);\n\n    if (b) {\n      return;\n    }\n\n    var c = 0;\n    var d = 0;\n    var e = this.e.bs;\n\n    if (e != null) {\n      var f = e.bn.i.b7();\n      c += f.x;\n      d += f.y;\n    }\n\n    for (var g = 0; g < this.b4.count; g++) {\n      this.b4._inner[g].bu(this.b4._inner[g].n + c, this.b4._inner[g].o + d);\n    }\n  };\n\n  ItemToolTipLayerView.prototype.ai = function (a) {\n    var e_2, _a;\n\n    _super.prototype.ai.call(this, a);\n\n    try {\n      for (var _b = tslib_1.__values(fromEnum(this.b2.a)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var tooltip_ = _c.value;\n\n        if (tooltip_._visibility != 0) {\n          continue;\n        }\n\n        var b = tooltip_;\n        var c = b.a3();\n        var d = b.n;\n        var e = b.o;\n        var f = new List$1(String_$type, 0);\n        var g = typeCast(DomWrapper_$type, b.content);\n\n        if (g != null) {\n          var h = g.getText();\n          f.add(h);\n        }\n\n        this.e.a2.addPointerTooltipData(a, c, d, e, f);\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n\n  ItemToolTipLayerView.prototype.cb = function () {\n    for (var a = 0; a < this.b4.count; a++) {\n      this.ca(this.b4._inner[a]);\n    }\n  };\n\n  ItemToolTipLayerView.$t = markType(ItemToolTipLayerView, 'ItemToolTipLayerView', AnnotationLayerView.$);\n  return ItemToolTipLayerView;\n}(AnnotationLayerView);\n\nexport { ItemToolTipLayerView };","map":{"version":3,"sources":["../../../../src/igniteui-charts/lib/ItemToolTipLayer_combined.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport * as tslib_1 from \"tslib\";\nimport { AnnotationLayer } from \"./AnnotationLayer\";\nimport { Series } from \"./Series\";\nimport { DependencyProperty } from \"igniteui-react-core\";\nimport { ItemTooltipLayerFrame } from \"./ItemTooltipLayerFrame\";\nimport { Base, fromEnum, Point_$type, markType, markDep, runOn, String_$type, typeCast } from \"igniteui-react-core\";\nimport { Pool$1 } from \"igniteui-react-core\";\nimport { List$1 } from \"igniteui-react-core\";\nimport { ItemTooltipCollisionInfo } from \"./ItemTooltipCollisionInfo\";\nimport { Rect } from \"igniteui-react-core\";\nimport { DataContext } from \"igniteui-react-core\";\nimport { Size } from \"igniteui-react-core\";\nimport { DeviceUtils } from \"igniteui-react-core\";\nimport { PropertyMetadata } from \"igniteui-react-core\";\nimport { isNaN_ } from \"igniteui-react-core\";\nimport { AnnotationLayerView } from \"./AnnotationLayerView\";\nimport { PointerTooltip } from \"./PointerTooltip\";\nimport { DomWrapper_$type } from \"igniteui-react-core\";\n/**\n * @hidden\n */\nvar ItemToolTipLayer = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ItemToolTipLayer, _super);\n    function ItemToolTipLayer() {\n        var _this = _super.call(this) || this;\n        var a = new ItemTooltipLayerFrame();\n        var b = new ItemTooltipLayerFrame();\n        var c = new ItemTooltipLayerFrame();\n        var d = _this.fi / 1000;\n        _this.l3 = a;\n        _this.l2 = b;\n        _this.l4 = c;\n        _this.ab = ItemToolTipLayer.$;\n        return _this;\n    }\n    ItemToolTipLayer.prototype.bf = function () {\n        return new ItemToolTipLayerView(this);\n    };\n    ItemToolTipLayer.prototype.iv = function (a) {\n        _super.prototype.iv.call(this, a);\n        this.m5 = a;\n    };\n    ItemToolTipLayer.prototype.get_cn = function () {\n        return true;\n    };\n    ItemToolTipLayer.prototype.i0 = function (a, b, c, d) {\n        _super.prototype.i0.call(this, a, b, c, d);\n        switch (b) {\n            case ItemToolTipLayer.$$p[1]:\n                this.je(true);\n                break;\n            case ItemToolTipLayer.$$p[2]:\n                this.je(true);\n                break;\n            case ItemToolTipLayer.$$p[0]:\n                this.je(true);\n                break;\n        }\n    };\n    ItemToolTipLayer.prototype.mm = function (a, b) {\n        if (this.m6 == null || this.m6 == a) {\n            if (!this.aq.c) {\n                this.je(b);\n            }\n        }\n    };\n    ItemToolTipLayer.prototype.l9 = function (a) {\n        if (!_super.prototype.l9.call(this, a)) {\n            return false;\n        }\n        var b = this.mh(a);\n        if (!b.c) {\n            return false;\n        }\n        return true;\n    };\n    ItemToolTipLayer.prototype.mo = function (a, b) {\n        var e_1, _a;\n        _super.prototype.mo.call(this, a, b);\n        var c = a;\n        var d = this.m5.b2;\n        var e = this.m9;\n        var f = this.m8;\n        c.o.clear();\n        c.i.clear();\n        c.n.clear();\n        c.g.clear();\n        c.f.clear();\n        c.l.clear();\n        c.j.clear();\n        c.m.clear();\n        c.k.clear();\n        c.h.clear();\n        if (isNaN_(this.m2.x) && isNaN_(this.m2.y)) {\n            d.count = 0;\n            return;\n        }\n        var g = 0;\n        if (this.l9(this.m6)) {\n            this.nf(this.m6, c, e, f, 0);\n            g++;\n        }\n        else {\n            try {\n                for (var _b = tslib_1.__values(fromEnum(this.bs.series)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var h = _c.value;\n                    if (this.l9(h)) {\n                        this.nf(h, c, e, f, g);\n                        g++;\n                    }\n                }\n            }\n            catch (e_1_1) {\n                e_1 = { error: e_1_1 };\n            }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return))\n                        _a.call(_b);\n                }\n                finally {\n                    if (e_1)\n                        throw e_1.error;\n                }\n            }\n            this.ne(c);\n        }\n        d.count = g;\n    };\n    ItemToolTipLayer.prototype.ne = function (a) {\n        var b = new List$1(ItemTooltipCollisionInfo.$, 0);\n        for (var c = 0; c < a.f.count; c++) {\n            var d = new ItemTooltipCollisionInfo();\n            d.d = c;\n            d.e = { $type: Point_$type, x: a.f._inner[c], y: a.g._inner[c] };\n            d.c = a.m._inner[c];\n            d.a = a.k._inner[c];\n            d.b = a.o._inner[c];\n            if (isNaN_(d.e.x) || isNaN_(d.e.y)) {\n                continue;\n            }\n            b.add(d);\n        }\n        b.aa(function (e, f) {\n            if (e.e.y < f.e.y) {\n                return -1;\n            }\n            if (e.e.y > f.e.y) {\n                return 1;\n            }\n            if (e.b < f.b) {\n                return -1;\n            }\n            if (e.b > f.b) {\n                return 1;\n            }\n            return 0;\n        });\n        var e = this.m7(b);\n        if (!e) {\n            return;\n        }\n        for (var f = 0; f < b.count - 1; f++) {\n            var g = b._inner[f];\n            var h = b._inner[f + 1];\n            var i = new Rect(0, g.e.x, g.e.y, g.c, g.a);\n            var j = new Rect(0, h.e.x, h.e.y, h.c, h.a);\n            if (i.intersectsWith(j) || i.top > j.bottom) {\n                h.e = { $type: Point_$type, x: h.e.x, y: i.bottom + 1 };\n            }\n        }\n        if (b._inner[b.count - 1].e.y + b._inner[b.count - 1].a > this.bi.br.height) {\n            b._inner[b.count - 1].e = { $type: Point_$type, x: b._inner[b.count - 1].e.x, y: b._inner[b.count - 1].e.y - ((b._inner[b.count - 1].e.y + b._inner[b.count - 1].a) - this.bi.br.height) };\n        }\n        for (var k = b.count - 1; k >= 1; k--) {\n            var l = b._inner[k];\n            var m = b._inner[k - 1];\n            var n = new Rect(0, l.e.x, l.e.y, l.c, l.a);\n            var o = new Rect(0, m.e.x, m.e.y, m.c, m.a);\n            if (n.intersectsWith(o) || n.top < o.bottom) {\n                m.e = { $type: Point_$type, x: m.e.x, y: n.top - (o.height + 1) };\n            }\n        }\n        for (var p = 0; p < b.count; p++) {\n            var q = b._inner[p].d;\n            var r = b._inner[p];\n            a.f._inner[q] = r.e.x;\n            a.g._inner[q] = r.e.y;\n        }\n    };\n    ItemToolTipLayer.prototype.m7 = function (a) {\n        if (a.count <= 1) {\n            return false;\n        }\n        var b = this.bi.br;\n        for (var c = 0; c < a.count - 1; c++) {\n            var d = a._inner[c];\n            var e = a._inner[c + 1];\n            var f = new Rect(0, d.e.x, d.e.y, d.c, d.a);\n            var g = new Rect(0, e.e.x, e.e.y, e.c, e.a);\n            if (f.intersectsWith(g)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ItemToolTipLayer.prototype.nf = function (a, b, c, d, e) {\n        var f = this.mh(a);\n        if (!f.c) {\n            return;\n        }\n        var g = a.lm(f.d, c, d);\n        var h = this.m5.b2;\n        var i = this.na(a);\n        var j = this.m2;\n        if (!c) {\n            j = this.lp(g);\n        }\n        var k = a.fp(j);\n        var l = h.item(e);\n        var m = this.bi.br;\n        var n = null;\n        if (a.co && k != null) {\n            n = a.as(k);\n        }\n        else {\n            n = new DataContext();\n            n.item = k;\n            n.series = a;\n        }\n        if (!this.m5.b3(a, l, i, n)) {\n            return;\n        }\n        var o = this.m5.cd(l, i, n);\n        b.i.add1(l);\n        b.j.add1(n);\n        b.l.add1(i);\n        var p = g.x;\n        var q = g.x;\n        q = Math.max(q, m.left);\n        q = Math.min(q, m.right);\n        b.n.add(q);\n        var r = g.y;\n        r = Math.max(r, m.top);\n        r = Math.min(r, m.bottom);\n        b.o.add(r);\n        var s = DeviceUtils.g(10);\n        var t = g.x + s;\n        if (t + o.width > m.right) {\n            t = (p - o.width) - s;\n        }\n        if (t < m.left) {\n            t = m.left;\n        }\n        b.f.add(t);\n        var u = (g.y - o.height) - s;\n        if (u + o.height > m.bottom) {\n            u = (m.bottom - o.height) - s;\n        }\n        if (u < m.top) {\n            u = m.top;\n        }\n        b.g.add(u);\n        b.m.add(o.width);\n        b.k.add(o.height);\n        var v = this.k4;\n        if (v == null) {\n            v = this.k6;\n        }\n        if (v == null) {\n            v = a.k4;\n        }\n        b.h.add(v);\n    };\n    ItemToolTipLayer.prototype.na = function (a) {\n        return a.toolTip;\n    };\n    ItemToolTipLayer.prototype.ib = function () {\n        this.m2 = { $type: Point_$type, x: NaN, y: NaN };\n        this.m5.cb();\n    };\n    ItemToolTipLayer.prototype.mr = function (a, b) {\n        _super.prototype.mr.call(this, a, b);\n        var c = a;\n        var d = c.o.count;\n        var e = b.br.left;\n        var f = b.br.right;\n        var g = b.br.top;\n        var h = b.br.bottom;\n        for (var i = 0; i < d; i++) {\n            if (isNaN_(c.n._inner[i]) || isNaN_(c.o._inner[i]) || isNaN_(c.f._inner[i]) || isNaN_(c.g._inner[i]) || c.l._inner[i] == null || c.j._inner[i] == null) {\n                this.m5.ca(c.i._inner[i]);\n                continue;\n            }\n            var j = c.f._inner[i];\n            var k = c.g._inner[i];\n            var l = c.m._inner[i];\n            var m = c.k._inner[i];\n            var n = false;\n            if (j < e && Math.abs(j - e) > 1) {\n                n = true;\n            }\n            if (k < g && Math.abs(k - g) > 1) {\n                n = true;\n            }\n            if ((j + l) > f && Math.abs((j + l) - f) > 1) {\n                n = true;\n            }\n            if ((k + m) > h && Math.abs((k + m) - h) > 1) {\n                n = true;\n            }\n            if (n) {\n                this.m5.ca(c.i._inner[i]);\n                continue;\n            }\n            var o = c.i._inner[i];\n            var p = Math.min(c.f._inner[i], c.n._inner[i]);\n            var q = Math.min(c.g._inner[i], c.o._inner[i]);\n            var r = c.n._inner[i] - c.f._inner[i];\n            var s = c.o._inner[i] - c.g._inner[i];\n            this.m5.cc(o, p, q, r, s);\n        }\n    };\n    ItemToolTipLayer.prototype.c8 = function () {\n        return true;\n    };\n    ItemToolTipLayer.$t = markType(ItemToolTipLayer, 'ItemToolTipLayer', AnnotationLayer.$);\n    ItemToolTipLayer.$$p = markDep(DependencyProperty, PropertyMetadata, ItemToolTipLayer, 'raisePropertyChanged', ['SkipUnknownValues:m8:ng', [0, true], 'TargetSeries:m6:nh', [Series.$, null], 'UseInterpolation:m9:ni', [0, false]]);\n    return ItemToolTipLayer;\n}(AnnotationLayer));\nexport { ItemToolTipLayer };\n/**\n * @hidden\n */\nvar ItemToolTipLayerView = /** @class */ /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ItemToolTipLayerView, _super);\n    function ItemToolTipLayerView(a) {\n        var _this = _super.call(this, a) || this;\n        _this.b1 = null;\n        _this.b2 = null;\n        _this.b4 = null;\n        _this._htmlTest = null;\n        _this.b1 = a;\n        _this.b4 = new List$1(PointerTooltip.$, 0);\n        return _this;\n    }\n    ItemToolTipLayerView.prototype.ap = function () {\n        var _this = this;\n        _super.prototype.ap.call(this);\n        this.b2 = ((function () {\n            var $ret = new Pool$1(Base.$);\n            $ret.create = runOn(_this, _this.b5);\n            $ret.activate = runOn(_this, _this.b7);\n            $ret.disactivate = runOn(_this, _this.b9);\n            $ret.destroy = runOn(_this, _this.b8);\n            return $ret;\n        })());\n        this.htmlTest = /^[^<]*(<[\\w\\W]+>)[^>]*$/;\n    };\n    ItemToolTipLayerView.prototype.ag = function () {\n        _super.prototype.ag.call(this);\n        for (var a = 0; a < this.b2.a.count; a++) {\n            this.b2.a._inner[a].bo();\n        }\n        for (var b = 0; b < this.b2.b.count; b++) {\n            this.b2.b._inner[b].bo();\n        }\n        this.b2.clear();\n    };\n    ItemToolTipLayerView.prototype.b5 = function () {\n        var a = new PointerTooltip();\n        a.bs(this.e.e4);\n        a._visibility = 1;\n        a.ao = this.e.bs.bn.j;\n        this.b4.add(a);\n        return a;\n    };\n    ItemToolTipLayerView.prototype.b7 = function (a) {\n        var b = a;\n    };\n    ItemToolTipLayerView.prototype.b9 = function (a) {\n        var b = a;\n        b._visibility = 1;\n    };\n    ItemToolTipLayerView.prototype.b8 = function (a) {\n        var b = a;\n        b.bv();\n        b.content = null;\n        this.b4.remove1(a);\n    };\n    Object.defineProperty(ItemToolTipLayerView.prototype, \"htmlTest\", {\n        get: function () {\n            return this._htmlTest;\n        },\n        set: function (a) {\n            this._htmlTest = a;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ItemToolTipLayerView.prototype.b3 = function (a, b, c, d) {\n        var e = b;\n        if (a.fz == \"default\") {\n            a.fz = a.bi.getDefaultTooltipTemplate();\n        }\n        var template_ = a.fz;\n        var context_ = d;\n        if (a.toolTip == null) {\n            return false;\n        }\n        var tooltip_ = a.toolTip;\n        if ((tooltip_.updateToolTip)) {\n            tooltip_._inPointer = true;\n            tooltip_.updateToolTip(context_, true);\n            tooltip_.setStyleProperty('position', 'relative');\n            tooltip_.setStyleProperty('left', '');\n            tooltip_.setStyleProperty('top', '');\n        }\n        e.content = a.toolTip;\n        return true;\n    };\n    ItemToolTipLayerView.prototype.cd = function (a, b, c) {\n        var d = a;\n        var e = d.content;\n        var f = new Size(1, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n        d.ct = 1;\n        var g = d.cs(new Size(1, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY));\n        d.ct = 0;\n        return g;\n    };\n    ItemToolTipLayerView.prototype.cc = function (a, b, c, d, e) {\n        var f = null;\n        if (this.e.bs != null) {\n            f = this.e.bs.bn.i.i();\n        }\n        var g = a;\n        g.ap = f;\n        var h = g.content;\n        g.cn = { $type: Point_$type, x: d, y: e };\n        g._visibility = 0;\n        g.n = b;\n        g.o = c;\n    };\n    ItemToolTipLayerView.prototype.ca = function (a) {\n        if (a != null) {\n            var b = a;\n            b._visibility = 1;\n        }\n    };\n    ItemToolTipLayerView.prototype.a3 = function (a, b) {\n        _super.prototype.a3.call(this, a, b);\n        if (b) {\n            return;\n        }\n        var c = 0;\n        var d = 0;\n        var e = this.e.bs;\n        if (e != null) {\n            var f = e.bn.i.b7();\n            c += f.x;\n            d += f.y;\n        }\n        for (var g = 0; g < this.b4.count; g++) {\n            this.b4._inner[g].bu(this.b4._inner[g].n + c, this.b4._inner[g].o + d);\n        }\n    };\n    ItemToolTipLayerView.prototype.ai = function (a) {\n        var e_2, _a;\n        _super.prototype.ai.call(this, a);\n        try {\n            for (var _b = tslib_1.__values(fromEnum(this.b2.a)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var tooltip_ = _c.value;\n                if (tooltip_._visibility != 0) {\n                    continue;\n                }\n                var b = tooltip_;\n                var c = b.a3();\n                var d = b.n;\n                var e = b.o;\n                var f = new List$1(String_$type, 0);\n                var g = typeCast(DomWrapper_$type, b.content);\n                if (g != null) {\n                    var h = g.getText();\n                    f.add(h);\n                }\n                this.e.a2.addPointerTooltipData(a, c, d, e, f);\n            }\n        }\n        catch (e_2_1) {\n            e_2 = { error: e_2_1 };\n        }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return))\n                    _a.call(_b);\n            }\n            finally {\n                if (e_2)\n                    throw e_2.error;\n            }\n        }\n    };\n    ItemToolTipLayerView.prototype.cb = function () {\n        for (var a = 0; a < this.b4.count; a++) {\n            this.ca(this.b4._inner[a]);\n        }\n    };\n    ItemToolTipLayerView.$t = markType(ItemToolTipLayerView, 'ItemToolTipLayerView', AnnotationLayerView.$);\n    return ItemToolTipLayerView;\n}(AnnotationLayerView));\nexport { ItemToolTipLayerView };\n//# sourceMappingURL=ItemToolTipLayer_combined.js.map\n"]},"metadata":{},"sourceType":"module"}